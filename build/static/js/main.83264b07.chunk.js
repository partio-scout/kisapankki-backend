(this.webpackJsonpkisapankki=this.webpackJsonpkisapankki||[]).push([[0],{135:function(e,t,a){e.exports=a(388)},387:function(e,t,a){},388:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),l=a.n(c),s=a(9),u=a(35),i=a(1),o=a(23),m=a(2),p=a.n(m),d=function(e){var t=e.message,a=e.type;return null===t?null:r.a.createElement("div",{className:a},t)},f=a(7),v=a.n(f),b="".concat("/api","/login"),E=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(v.a.post(b,e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},h=null,g=function(){return h},j=function(e){h="bearer ".concat(e)},k=function(e){var t=e.setUser,a=Object(n.useState)(null),c=Object(i.a)(a,2),l=c[0],s=c[1],u=Object(n.useState)(""),m=Object(i.a)(u,2),f=m[0],v=m[1],b=Object(n.useState)(""),h=Object(i.a)(b,2),g=h[0],k=h[1],O=Object(n.useState)(""),y=Object(i.a)(O,2),N=y[0],S=y[1],w=Object(o.f)();return r.a.createElement("div",{className:"login-form"},r.a.createElement("h2",null,"Kirjaudu sis\xe4\xe4n"),r.a.createElement(d,{message:l,type:"error"}),r.a.createElement("form",{onSubmit:function(e){var a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,p.a.awrap(E({username:f,email:g,password:N}));case 4:a=n.sent,window.localStorage.setItem("loggedUser",JSON.stringify(a)),t(a),j(a.token),v(""),k(""),S(""),w.push("/"),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(1),s("V\xe4\xe4r\xe4 k\xe4ytt\xe4j\xe4tunnus/salasana"),setTimeout((function(){s(null)}),5e3);case 18:case"end":return n.stop()}}),null,null,[[1,14]])}},r.a.createElement("div",null,r.a.createElement("input",{className:"username",type:"text",value:f,name:"Username",placeholder:"K\xe4ytt\xe4j\xe4tunnus",onChange:function(e){var t=e.target;return v(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"password",type:"password",value:N,name:"Password",placeholder:"Salasana",onChange:function(e){var t=e.target;return S(t.value)}})),r.a.createElement("button",{type:"submit",className:"login-button"},"Kirjaudu")))},O=a(29),y=function(){return r.a.createElement("div",{className:"frontpage-info"},r.a.createElement("h2",null,"Kisateht\xe4v\xe4pankki"),r.a.createElement("p",null,"Kisateht\xe4v\xe4pankki on arkisto, johon voidaan tallettaa teht\xe4vi\xe4. Sivustolle voi tallettaa teht\xe4v\xe4n, sek\xe4 siihen liittyv\xe4t liitetiedostot."),r.a.createElement("p",null,'Kirjautumattomana k\xe4ytt\xe4j\xe4n\xe4 voit koostaa teht\xe4vist\xe4 kisaa varten kokonaisuuksia, sek\xe4 ladata ne PDF-tiedostona itsellesi. Teht\xe4v\xe4n lis\xe4\xe4minen "kisakoriin" onnistuu painamalla teht\xe4v\xe4ss\xe4 esiintyv\xe4\xe4 koripainiketta, ja jo mukaan otetut teht\xe4v\xe4t l\xf6yd\xe4t yl\xe4reunan koria painamalla.'),r.a.createElement("p",null,"Voit my\xf6skin selailla teht\xe4vi\xe4, arvostella teht\xe4vi\xe4 ja lis\xe4t\xe4 uusia teht\xe4vi\xe4. Uuden teht\xe4v\xe4n lis\xe4\xe4minen arkistoon vaatii ensin yll\xe4pit\xe4j\xe4n hyv\xe4ksynn\xe4n uudelle teht\xe4v\xe4lle."))},N=function(e){var t=e.tasks,a=e.addTaskToBasket,c=Object(n.useState)([]),l=Object(i.a)(c,2),u=l[0],o=l[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),d=p[0],f=p[1];Object(n.useEffect)((function(){o(Object(O.a)(t).sort(v).slice(0,5)),f(Object(O.a)(t).sort(b).slice(0,5))}),[t]);var v=function(e,t){return t.created.localeCompare(e.created)},b=function(e,t){return t.ratingsAVG-e.ratingsAVG};return r.a.createElement("div",{className:"frontpage"},r.a.createElement("h1",null,"Tervetuloa Kisateht\xe4v\xe4pankkiin!"),r.a.createElement("div",{className:"task-list frontpage-container"},r.a.createElement(y,null),r.a.createElement("div",{className:"new-favorite-lists"},r.a.createElement("div",{className:"new-list"},r.a.createElement("div",{className:"image-on-background"},r.a.createElement("h2",null,"Uusimmat teht\xe4v\xe4t"),r.a.createElement("div",{className:"task-list-title frontpage-item"},r.a.createElement("span",null,"Teht\xe4v\xe4n nimi"),r.a.createElement("span",null,"Sarja"),r.a.createElement("span",null,"Kategoria"),r.a.createElement("span",null))),u.map((function(e){return r.a.createElement("div",{className:"task-list-item frontpage-item new-item",key:e.id},r.a.createElement("span",null,r.a.createElement(s.b,{to:"/tehtava/".concat(e.id)},e.name)),r.a.createElement("span",null,e.series.map((function(t){return r.a.createElement("div",{key:e.id+t.id},t.name," ")}))),r.a.createElement("span",null,e.category&&e.category.name),r.a.createElement("span",null,r.a.createElement("div",{className:"black-basket",onClick:function(){return a(e)}})))}))),r.a.createElement("div",{className:"favorite-list"},r.a.createElement("div",{className:"image-on-background"},r.a.createElement("h2",null,"Suosituimmat teht\xe4v\xe4t"),r.a.createElement("div",{className:"task-list-title frontpage-item"},r.a.createElement("span",null,"Teht\xe4v\xe4n nimi"),r.a.createElement("span",null,"Sarja"),r.a.createElement("span",null,"Kategoria"),r.a.createElement("span",null))),d.map((function(e){return r.a.createElement("div",{className:"task-list-item frontpage-item favorite-item",key:e.id},r.a.createElement("span",null,r.a.createElement(s.b,{to:"/tehtava/".concat(e.id)},e.name)),r.a.createElement("span",null,e.series.map((function(t){return r.a.createElement("div",{key:e.id+t.id},t.name," ")}))),r.a.createElement("span",null,e.category&&e.category.name),r.a.createElement("span",null,r.a.createElement("div",{className:"black-basket",onClick:function(){return a(e)}})))}))))))},S="".concat("/api","/task"),w="".concat("/api","/task/pending"),x=function(e){var t,a,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=null,(a=g())&&(t={headers:{Authorization:a}}),r.next=5,p.a.awrap(v.a.post(S,e,t));case 5:return n=r.sent,r.abrupt("return",n.data);case 7:case"end":return r.stop()}}))},C=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(v.a.get(S));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},T=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(v.a.get("".concat(S,"/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},D=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(v.a.post("".concat(S,"/search"),e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},M=function(e){var t,a,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=null,(a=g())&&(t={headers:{Authorization:a}}),r.next=5,p.a.awrap(v.a.put("".concat(S,"/").concat(e.id),e,t));case 5:return n=r.sent,r.abrupt("return",n.data);case 7:case"end":return r.stop()}}))},K=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.delete("".concat(S,"/").concat(e),t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},A=function(){var e,t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e={headers:{Authorization:g()}},a.next=3,p.a.awrap(v.a.get(w,e));case 3:return t=a.sent,a.abrupt("return",t.data);case 5:case"end":return a.stop()}}))},L=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.put("".concat(S,"/").concat(e,"/accept"),e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},P=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(v.a.post("".concat(S,"/").concat(e,"/views")));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},V="".concat("/api","/series"),U=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.post(V,e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},J=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(v.a.get(V));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},I=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.delete("".concat(V,"/").concat(e),t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},H=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.put("".concat(V,"/").concat(e.id),e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},z="".concat("/api","/rule"),F=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.post(z,e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},R=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(v.a.get(z));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},_=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.put("".concat(z,"/").concat(e.id),e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},B=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.delete("".concat(z,"/").concat(e),t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},G="".concat("/api","/category"),Y=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.post(G,e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},q=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(v.a.get(G));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},Q=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),t={headers:{Authorization:g()}},n.next=4,p.a.awrap(v.a.put("".concat(G,"/").concat(e.id),e,t));case 4:return a=n.sent,n.abrupt("return",a.data);case 6:case"end":return n.stop()}}))},W=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.delete("".concat(G,"/").concat(e),t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},X=a(27),Z=function(e){var t=e.setTasks,a=e.setAllTasks,c=Object(n.useState)(""),l=Object(i.a)(c,2),s=l[0],u=l[1],o=Object(n.useState)(""),m=Object(i.a)(o,2),f=m[0],v=m[1];return r.a.createElement("div",null,r.a.createElement(d,{message:f,type:"error"}),r.a.createElement("form",{onSubmit:function(e){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,r.next=4,p.a.awrap(D({search:s}));case 4:n=r.sent,t(n),a(n),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),v("Haku ei onnistunut"),setTimeout((function(){v(null)}),5e3);case 13:case"end":return r.stop()}}),null,null,[[1,9]])},className:"search-form"},r.a.createElement("input",{className:"search-input",type:"text",defaultValue:"",name:"search",placeholder:"Hakutermi",onChange:function(e){var t=e.target;return u(t.value)}}),r.a.createElement("button",{type:"submit",className:"search-tasks-button"},"Hae")))},$=a(130),ee=a.n($),te=function(e){var t=e.user,a=e.originalTasks,c=e.addTaskToBasket,l=e.handleUpdateViews,u=Object(n.useState)(a),o=Object(i.a)(u,2),m=o[0],f=o[1],v=Object(n.useState)(a),b=Object(i.a)(v,2),E=b[0],h=b[1],g=Object(n.useState)(null),j=Object(i.a)(g,2),k=j[0],O=j[1],y=Object(n.useState)([]),N=Object(i.a)(y,2),S=N[0],w=N[1],x=Object(n.useState)([]),C=Object(i.a)(x,2),T=C[0],D=C[1],M=Object(n.useState)(""),A=Object(i.a)(M,2),L=A[0],P=A[1],V=Object(n.useState)([]),U=Object(i.a)(V,2),I=U[0],H=U[1],z=Object(n.useState)([]),F=Object(i.a)(z,2),_=(F[0],F[1],Object(n.useState)([])),B=Object(i.a)(_,2),G=B[0],Y=B[1],Q=Object(n.useState)(!0),W=Object(i.a)(Q,2),$=W[0],te=(W[1],Object(n.useState)([])),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1];Object(n.useEffect)((function(){q().then((function(e){H(e)})),J().then((function(e){re(e)})),R().then((function(e){Y(e)}))}),[]),Object(n.useEffect)((function(){f(a),h(a)}),[a]),Object(n.useEffect)((function(){if(T.length>0&&S.length>0&&L){for(var e=[],t=0;t<E.length;t++)for(var a=0;a<E[t].series.length;a++)T.includes(E[t].series[a].id)&&S.includes(E[t].category.id)&&E[t].rules.id===L.id&&!e.includes(E[t])&&e.push(E[t]);f(e)}else if(T.length>0&&S.length>0){for(var n=[],r=0;r<E.length;r++)for(var c=0;c<E[r].series.length;c++)T.includes(E[r].series[c].id)&&S.includes(E[r].category.id)&&!n.includes(E[r])&&n.push(E[r]);f(n)}else if(T.length>0&&L){for(var l=[],s=0;s<E.length;s++)for(var u=0;u<E[s].series.length;u++)T.includes(E[s].series[u].id)&&E[s].rules.id===L.id&&!l.includes(E[s])&&l.push(E[s]);f(l)}else if(S.length>0&&L)f(E.filter((function(e){return S.includes(e.category.id)&&e.rules.id===L.id})));else if(T.length>0){for(var i=[],o=0;o<E.length;o++)for(var m=0;m<E[o].series.length;m++)T.includes(E[o].series[m].id)&&!i.includes(E[o])&&i.push(E[o]);f(i)}else S.length>0?f(E.filter((function(e){return S.includes(e.category.id)}))):f(L?E.filter((function(e){return e.rules.id===L.id})):E)}),[S,T,L]);var ce=function(e,t){return t.name.localeCompare(e.name)},le=function(e,t){return e.name.localeCompare(t.name)},se=function(e,t){return e.ratingsAVG-t.ratingsAVG},ue=function(e,t){return t.ratingsAVG-e.ratingsAVG};return r.a.createElement("div",{className:"task-list"},r.a.createElement("h1",null,"Kisateht\xe4v\xe4pankki"),r.a.createElement("div",{className:"search-filter-container"},r.a.createElement("div",{className:"search"},r.a.createElement(Z,{setTasks:f,setAllTasks:h})),r.a.createElement("div",{className:"filter"},r.a.createElement(X.a,{name:"filter-series",getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e.id)},onChange:function(e){e&&e.length>0?D(e.map((function(e){return e.id}))):(D([]),f(E))},options:ne,isClearable:$,placeholder:"Sarja",isMulti:!0})),r.a.createElement("div",{className:"filter"},r.a.createElement(X.a,{name:"filter-category",getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e.id)},onChange:function(e){e&&e.length>0?w(e.map((function(e){return e.id}))):(w([]),f(E))},options:I,isClearable:$,placeholder:"Kategoria",isMulti:!0})),r.a.createElement("div",{className:"filter"},r.a.createElement(X.a,{name:"filter-rules",getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e.id)},onChange:function(e){e?P(e):(P(""),f(E))},options:G,isClearable:$,placeholder:"S\xe4\xe4nn\xf6t"}))),r.a.createElement(d,{message:k}),m&&m.length>0&&r.a.createElement("div",{className:"task-list-title"},r.a.createElement("span",{className:"arrow-inline"},"Teht\xe4v\xe4n nimi ",r.a.createElement("span",{className:"arrow-container"},r.a.createElement("i",{className:"name-arrow-up",onClick:function(){f(m.sort(ce).concat([]))}}),r.a.createElement("i",{className:"name-arrow-down",onClick:function(){f(m.sort(le).concat([]))}}))),r.a.createElement("span",null,"Sarja"),r.a.createElement("span",null,"Kategoria"),r.a.createElement("span",{className:"arrow-inline"},"Arvostelu ",r.a.createElement("span",{className:"arrow-container"},r.a.createElement("i",{className:"rating-arrow-up",onClick:function(){f(m.sort(se).concat([]))}}),r.a.createElement("i",{className:"rating-arrow-down",onClick:function(){f(m.sort(ue).concat([]))}}))),t&&r.a.createElement("span",null),r.a.createElement("span",null)),m.map((function(e){return r.a.createElement("div",{className:"task-list-item",key:e.id},r.a.createElement("span",null,r.a.createElement(s.b,{to:"/tehtava/".concat(e.id),onClick:function(){return l(e.id)}},e.name),r.a.createElement("p",null,"Katselukertoja: ",e.views)),r.a.createElement("span",null,e.series.map((function(t){return r.a.createElement("div",{key:e.id+t.id},t.name," ")}))),r.a.createElement("span",null,e.category&&e.category.name),r.a.createElement("span",null,r.a.createElement(ee.a,{rating:e.ratingsAVG,starRatedColor:"#f0e105",starDimension:"20px",starSpacing:"10px"})),t&&r.a.createElement("span",{className:"task-list-delete"},r.a.createElement("button",{className:"delete-button",onClick:function(){return function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!window.confirm("Haluatko poistaa teht\xe4v\xe4n: ".concat(e.name))){t.next=5;break}return t.next=4,p.a.awrap(K(e.id));case 4:f(m.filter((function(t){return t.id!==e.id})));case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),O("Jotain meni vikaan"),setTimeout((function(){O(null)}),5e3);case 11:case"end":return t.stop()}}),null,null,[[0,7]])}(e)}},"Poista")),r.a.createElement("span",null,r.a.createElement("div",{className:"black-basket",onClick:function(){return c(e)}})))})))},ae=function(e){var t=e.tasks,a=e.removeTaskFromBasket,n=e.handleUpdateViews;return r.a.createElement("div",{className:"task-list"},r.a.createElement("h2",null,"Kisaan valitut teht\xe4v\xe4t"),t&&0===t.length&&r.a.createElement("div",null,"Ei valittuja teht\xe4vi\xe4"),t&&t.length>0&&r.a.createElement("div",{className:"task-list-title"},r.a.createElement("span",null,"Teht\xe4v\xe4n nimi"),r.a.createElement("span",null,"Sarja"),r.a.createElement("span",null,"Kategoria"),r.a.createElement("span",null)),t.map((function(e){return r.a.createElement("div",{className:"task-list-item",key:e.id},r.a.createElement("span",null,r.a.createElement(s.b,{to:"/tehtava/".concat(e.id),onClick:function(){return n(e.id)}},e.name),r.a.createElement("p",null,"Katselukertoja: ",e.views)),r.a.createElement("span",null,e.series.map((function(t){return r.a.createElement("div",{key:e.id+t.id},t.name," ")}))),r.a.createElement("span",null,e.category&&e.category.name),r.a.createElement("span",{className:"delete-task-from-basket",onClick:function(){return a(e.id)}},"x"))})))},ne="".concat("/api","/user"),re=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.post(ne,e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},ce=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(v.a.get(ne));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},le=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.put(ne,e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},se=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],o=s[1],m=Object(n.useState)(null),f=Object(i.a)(m,2),v=f[0],b=f[1],E=Object(n.useState)(null),h=Object(i.a)(E,2),g=h[0],j=h[1],k=Object(n.useState)(null),O=Object(i.a)(k,2),y=O[0],N=O[1],S=Object(n.useState)(null),w=Object(i.a)(S,2),x=w[0],C=w[1],T=Object(n.useState)(""),D=Object(i.a)(T,2),M=D[0],K=D[1],A=Object(n.useState)(""),L=Object(i.a)(A,2),P=L[0],V=L[1],U=Object(n.useState)(""),J=Object(i.a)(U,2),I=J[0],H=J[1],z=Object(n.useState)([]),F=Object(i.a)(z,2),R=F[0],_=F[1],B=Object(n.useState)(""),G=Object(i.a)(B,2),Y=G[0],q=G[1],Q=Object(n.useState)(!0),W=Object(i.a)(Q,2),X=W[0],Z=W[1];Object(n.useEffect)((function(){ce().then((function(e){_(e)}))}),[]);return r.a.createElement("div",{className:"signup-form"},r.a.createElement("h2",null,"Lis\xe4\xe4 yll\xe4pit\xe4j\xe4"),r.a.createElement(d,{message:a,type:"success"}),r.a.createElement(d,{message:u,type:"error"}),r.a.createElement("form",{onSubmit:function(e){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),b(null),j(null),N(null),C(null),M.length<3&&b("Nimess\xe4 pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),P.length<3&&j("K\xe4ytt\xe4j\xe4tunnuksessa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),I.length<3&&N("Salasanassa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),R.some((function(e){return e.username===P}))&&j("K\xe4ytt\xe4j\xe4tunnus on varattu"),!(M.length<3||P.length<3||I.length<3||R.some((function(e){return e.username===P})))){t.next=11;break}return t.abrupt("return");case 11:return t.prev=11,t.next=14,p.a.awrap(re({name:M,username:P,email:Y,password:I,allowNotifications:X}));case 14:K(""),V(""),q(""),H(""),Z(!0),c("Yll\xe4pit\xe4j\xe4 lis\xe4tty!"),setTimeout((function(){c(null)}),5e3),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(11),o("Lis\xe4\xe4minen ep\xe4onnistui"),setTimeout((function(){o(null)}),5e3);case 27:case"end":return t.stop()}}),null,null,[[11,23]])}},r.a.createElement("div",{className:"Testi"},r.a.createElement(d,{message:v,type:"error"}),r.a.createElement("input",{className:"name",type:"text",value:M,name:"Name",placeholder:"Nimi",onChange:function(e){var t=e.target;return K(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:g,type:"error"}),r.a.createElement("input",{className:"username",type:"text",value:P,name:"Username",placeholder:"K\xe4ytt\xe4j\xe4tunnus",onChange:function(e){var t=e.target;return V(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:x,type:"error"}),r.a.createElement("input",{className:"email",type:"email",value:Y,name:"email",placeholder:"S\xe4hk\xf6postiosoite",onChange:function(e){var t=e.target;return q(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:y,type:"error"}),r.a.createElement("input",{className:"password",type:"password",value:I,name:"Password",placeholder:"Salasana",onChange:function(e){var t=e.target;return H(t.value)}})),r.a.createElement("div",null,r.a.createElement("label",null,"Vastaanota ilmoituksia:",r.a.createElement("div",{className:"admin-radio",onChange:function(e){var t=e.target;return Z(t.value)}},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"notifications",value:!0,defaultChecked:!0}),"Kyll\xe4"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"notifications",value:!1}),"Ei")))),r.a.createElement("button",{type:"submit",className:"signup-button"},"Lis\xe4\xe4")))},ue=function(e){var t=e.rules,a=e.setRules,c=e.categories,l=Object(n.useState)(""),s=Object(i.a)(l,2),o=s[0],m=s[1],f=Object(n.useState)(""),v=Object(i.a)(f,2),b=v[0],E=v[1],h=Object(n.useState)(""),g=Object(i.a)(h,2),j=g[0],k=g[1],O=Object(n.useState)(null),y=Object(i.a)(O,2),N=y[0],S=y[1],w=Object(n.useState)(!1),x=Object(i.a)(w,2),C=x[0],T=x[1],D=Object(n.useState)([]),M=Object(i.a)(D,2),K=M[0],A=M[1],L=Object(n.useState)([]),P=Object(i.a)(L,2),V=P[0],U=P[1],J=Object(n.useState)(!0),I=Object(i.a)(J,2),H=I[0],z=(I[1],function(e){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),n={id:j,name:b,acceptedCategories:V},r.prev=2,r.next=5,p.a.awrap(_({id:j,name:b,acceptedCategories:V.map((function(e){return e.id}))}));case 5:T(!1),a(t.map((function(e){return e.id!==n.id?e:n}))),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(2),S("Jotain meni vikaan"),setTimeout((function(){S(null)}),5e3);case 13:case"end":return r.stop()}}),null,null,[[2,9]])}),R=function(e){U(e)};return r.a.createElement("div",{className:"rule-form"},r.a.createElement(d,{message:N,type:"error"}),t&&t.map((function(e){return r.a.createElement("div",{className:"rule-list-item",key:e.id},C&&j===e.id?r.a.createElement("div",{className:"rule-form-item"},r.a.createElement("form",{onSubmit:z},r.a.createElement("div",{className:"item-modify"},r.a.createElement("input",{className:"rule",type:"text",value:b,name:"Category",onChange:function(e){var t=e.target;return E(t.value)}}),r.a.createElement("div",{className:"item-buttons-save"},r.a.createElement("button",{type:"submit",className:"rule-save-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return T(!1)}},"Peruuta"))),r.a.createElement("div",{className:"modify-acceptedCategories"},r.a.createElement(X.a,{name:"accepted-categories",value:V,getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e.id)},onChange:R,options:c,isClearable:H,placeholder:"S\xe4\xe4nn\xf6n kategoriat",isMulti:!0})))):r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"item-name"},e.name),r.a.createElement("div",{className:"item-buttons"},r.a.createElement("button",{onClick:function(){return function(e){T(!0),k(e.id),E(e.name),U(e.acceptedCategories)}(e)},className:"modify-button"},"Muokkaa"),r.a.createElement("button",{onClick:function(){return function(e){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!window.confirm("Haluatko poistaa s\xe4\xe4nn\xf6n: ".concat(e.name))){n.next=5;break}return n.next=4,p.a.awrap(B(e.id));case 4:a(t.filter((function(t){return t.id!==e.id})));case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),S("Jotain meni vikaan"),setTimeout((function(){S(null)}),5e3);case 11:case"end":return n.stop()}}),null,null,[[0,7]])}(e)},className:"delete-button"},"Poista")),r.a.createElement("div",{className:"break"}),r.a.createElement("div",{className:"accepted-categories-list"},e.acceptedCategories&&e.acceptedCategories.map((function(e){return r.a.createElement("span",{key:e.id},e.name," ")})))))})),r.a.createElement("form",{onSubmit:function(e){var n,r;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e.preventDefault(),n=K,c.prev=2,c.next=5,p.a.awrap(F({rules:o,acceptedCategories:K.map((function(e){return e.id}))}));case 5:r=c.sent,m(""),A([]),a(t.concat(Object(u.a)({},r,{acceptedCategories:n}))),c.next=15;break;case 11:c.prev=11,c.t0=c.catch(2),S("Jotain meni vikaan"),setTimeout((function(){S(null)}),5e3);case 15:case"end":return c.stop()}}),null,null,[[2,11]])},className:"add-form"},r.a.createElement("div",{className:"item-add"},r.a.createElement("input",{className:"rule",type:"text",value:o,name:"Rules",placeholder:"Uusi s\xe4\xe4nt\xf6",onChange:function(e){var t=e.target;return m(t.value)}}),r.a.createElement("button",{type:"submit",className:"rule-add-button"},"Lis\xe4\xe4")),r.a.createElement("div",{className:"add-acceptedCategories"},r.a.createElement(X.a,{name:"accepted-categories",value:K,getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e.id)},onChange:function(e){A(e)},options:c,isClearable:H,placeholder:"Uuden s\xe4\xe4nn\xf6n kategoriat",isMulti:!0}))))},ie="".concat("/api","/language"),oe=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.post(ie,e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},me=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(v.a.get(ie));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},pe=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.delete("".concat(ie,"/").concat(e),t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},de=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{Authorization:g()}},n.next=3,p.a.awrap(v.a.put("".concat(ie,"/").concat(e.id),e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},fe=function(e){var t=e.languages,a=e.setLanguages,c=Object(n.useState)(""),l=Object(i.a)(c,2),s=l[0],u=l[1],o=Object(n.useState)(""),m=Object(i.a)(o,2),f=m[0],v=m[1],b=Object(n.useState)(""),E=Object(i.a)(b,2),h=E[0],g=E[1],j=Object(n.useState)(null),k=Object(i.a)(j,2),O=k[0],y=k[1],N=Object(n.useState)(!1),S=Object(i.a)(N,2),w=S[0],x=S[1],C=function(e){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),n={id:h,name:f},r.prev=2,r.next=5,p.a.awrap(de(n));case 5:x(!1),a(t.map((function(e){return e.id!==n.id?e:n}))),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(2),y("Jotain meni vikaan"),setTimeout((function(){y(null)}),5e3);case 13:case"end":return r.stop()}}),null,null,[[2,9]])};return r.a.createElement("div",{className:"language-form"},r.a.createElement(d,{message:O,type:"error"}),t&&t.map((function(e){return r.a.createElement("div",{className:"language-list-item",key:e.id},w&&h===e.id?r.a.createElement("div",{className:"language-form-item"},r.a.createElement("form",{onSubmit:C},r.a.createElement("div",{className:"item-modify"},r.a.createElement("input",{className:"language",type:"text",value:f,name:"Language",onChange:function(e){var t=e.target;return v(t.value)}}),r.a.createElement("div",{className:"item-buttons-save"},r.a.createElement("button",{type:"submit",className:"language-save-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return x(!1)}},"Peruuta"))))):r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"item-name"},e.name),r.a.createElement("div",{className:"item-buttons"},r.a.createElement("button",{onClick:function(){return function(e){x(!0),g(e.id),v(e.name)}(e)},className:"modify-button"},"Muokkaa"),r.a.createElement("button",{onClick:function(){return function(e){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!window.confirm("Haluatko poistaa kielen: ".concat(e.name))){n.next=5;break}return n.next=4,p.a.awrap(pe(e.id));case 4:a(t.filter((function(t){return t.id!==e.id})));case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),y("Jotain meni vikaan"),setTimeout((function(){y(null)}),5e3);case 11:case"end":return n.stop()}}),null,null,[[0,7]])}(e)},className:"delete-button"},"Poista"))))})),r.a.createElement("form",{onSubmit:function(e){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,r.next=4,p.a.awrap(oe({language:s}));case 4:n=r.sent,u(""),a(t.concat(n)),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),y("Kielen lis\xe4\xe4minen ei onnistunut"),setTimeout((function(){y(null)}),5e3);case 13:case"end":return r.stop()}}),null,null,[[1,9]])},className:"add-form"},r.a.createElement("div",{className:"item-add"},r.a.createElement("input",{className:"language",type:"text",value:s,name:"Language",placeholder:"Uusi kieli",onChange:function(e){var t=e.target;return u(t.value)}}),r.a.createElement("button",{type:"submit",className:"language-add-button"},"Lis\xe4\xe4"))))},ve=a(73),be=function(e){var t=e.series,a=e.setSeries,c=Object(n.useState)(""),l=Object(i.a)(c,2),s=l[0],u=l[1],o=Object(n.useState)(""),m=Object(i.a)(o,2),f=m[0],v=m[1],b=Object(n.useState)(""),E=Object(i.a)(b,2),h=E[0],g=E[1],j=Object(n.useState)(""),k=Object(i.a)(j,2),O=k[0],y=k[1],N=Object(n.useState)("#ffffff"),S=Object(i.a)(N,2),w=S[0],x=S[1],C=Object(n.useState)(null),T=Object(i.a)(C,2),D=T[0],M=T[1],K=Object(n.useState)(!1),A=Object(i.a)(K,2),L=A[0],P=A[1],V=function(e){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),n={id:h,name:f,color:O},r.prev=2,r.next=5,p.a.awrap(H(n));case 5:P(!1),a(t.map((function(e){return e.id!==n.id?e:n}))),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(2),M("Jotain meni vikaan"),setTimeout((function(){M(null)}),5e3);case 13:case"end":return r.stop()}}),null,null,[[2,9]])};return r.a.createElement("div",{className:"series-form"},r.a.createElement(d,{message:D,type:"error"}),t&&t.map((function(e){return r.a.createElement("div",{className:"serie-list-item",key:e.id},L&&h===e.id?r.a.createElement("div",{className:"serie-form-item"},r.a.createElement("form",{onSubmit:V},r.a.createElement("div",{className:"item-modify"},r.a.createElement("input",{className:"serie",type:"text",value:f,name:"Serie",onChange:function(e){var t=e.target;return v(t.value)}}),r.a.createElement("div",{className:"item-buttons-save"},r.a.createElement("button",{type:"submit",className:"serie-save-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return P(!1)}},"Peruuta")),r.a.createElement("div",{className:"color-picker"},r.a.createElement(ve.CirclePicker,{color:O,onChangeComplete:function(e){return y(e.hex)},colors:["#253764","#28aae1","#f04150","#f0a01e","#f0e105","#14a54b","#f5ea2e","#d4791e","#5e0f75","#33652e","#6e470a","#607d8b"]}))))):r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"item-name"},r.a.createElement("span",null,e.name),r.a.createElement("span",{style:{backgroundColor:e.color,display:"inline-block",borderRadius:"50%",height:"27px",width:"27px",marginLeft:"5px"}})),r.a.createElement("div",{className:"item-buttons"},r.a.createElement("button",{onClick:function(){return function(e){P(!0),g(e.id),v(e.name),y(e.color)}(e)},className:"modify-button"},"Muokkaa"),r.a.createElement("button",{onClick:function(){return function(e){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!window.confirm("Haluatko poistaa sarjan: ".concat(e.name))){n.next=5;break}return n.next=4,p.a.awrap(I(e.id));case 4:a(t.filter((function(t){return t.id!==e.id})));case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),M("Jotain meni vikaan"),setTimeout((function(){M(null)}),5e3);case 11:case"end":return n.stop()}}),null,null,[[0,7]])}(e)},className:"delete-button"},"Poista"))))})),r.a.createElement("form",{onSubmit:function(e){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,r.next=4,p.a.awrap(U({name:s,color:w}));case 4:n=r.sent,u(""),x(""),a(t.concat(n)),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(1),M("Jotain meni vikaan"),setTimeout((function(){M(null)}),5e3);case 14:case"end":return r.stop()}}),null,null,[[1,10]])},className:"add-form"},r.a.createElement("div",{className:"item-add"},r.a.createElement("input",{className:"name",type:"text",value:s,name:"Name",placeholder:"Uusi sarja",onChange:function(e){var t=e.target;return u(t.value)}}),r.a.createElement("button",{type:"submit",className:"series-submit-button"},"Lis\xe4\xe4")),r.a.createElement("div",{className:"color-picker"},r.a.createElement(ve.CirclePicker,{color:w,onChangeComplete:function(e){return x(e.hex)},colors:["#253764","#28aae1","#f04150","#f0a01e","#f0e105","#14a54b","#f5ea2e","#d4791e","#5e0f75","#33652e","#6e470a","#607d8b"]}))))},Ee=function(e){var t=e.categories,a=e.setCategories,c=Object(n.useState)(""),l=Object(i.a)(c,2),s=l[0],u=l[1],o=Object(n.useState)(""),m=Object(i.a)(o,2),f=m[0],v=m[1],b=Object(n.useState)(""),E=Object(i.a)(b,2),h=E[0],g=E[1],j=Object(n.useState)(null),k=Object(i.a)(j,2),O=k[0],y=k[1],N=Object(n.useState)(!1),S=Object(i.a)(N,2),w=S[0],x=S[1],C=function(e){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),n={id:h,name:f},r.prev=2,r.next=5,p.a.awrap(Q(n));case 5:x(!1),a(t.map((function(e){return e.id!==n.id?e:n}))),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(2),y("Jotain meni vikaan"),setTimeout((function(){y(null)}),5e3);case 13:case"end":return r.stop()}}),null,null,[[2,9]])};return r.a.createElement("div",{className:"category-form"},r.a.createElement(d,{message:O,type:"error"}),t&&t.map((function(e){return r.a.createElement("div",{className:"category-list-item",key:e.id},w&&h===e.id?r.a.createElement("div",{className:"category-form-item"},r.a.createElement("form",{onSubmit:C},r.a.createElement("div",{className:"item-modify"},r.a.createElement("input",{className:"category",type:"text",value:f,name:"Category",onChange:function(e){var t=e.target;return v(t.value)}}),r.a.createElement("div",{className:"item-buttons-save"},r.a.createElement("button",{type:"submit",className:"category-save-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return x(!1)}},"Peruuta"))))):r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"item-name"},e.name),r.a.createElement("div",{className:"item-buttons"},r.a.createElement("button",{onClick:function(){return function(e){x(!0),g(e.id),v(e.name)}(e)},className:"modify-button"},"Muokkaa"),r.a.createElement("button",{onClick:function(){return function(e){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!window.confirm("Haluatko poistaa kategorian: ".concat(e.name))){n.next=5;break}return n.next=4,p.a.awrap(W(e.id));case 4:a(t.filter((function(t){return t.id!==e.id})));case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),y("Jotain meni vikaan"),setTimeout((function(){y(null)}),5e3);case 11:case"end":return n.stop()}}),null,null,[[0,7]])}(e)},className:"delete-button"},"Poista"))))})),r.a.createElement("form",{onSubmit:function(e){var n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,r.next=4,p.a.awrap(Y({category:s}));case 4:n=r.sent,u(""),a(t.concat(n)),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),y("Jotain meni vikaan"),setTimeout((function(){y(null)}),5e3);case 13:case"end":return r.stop()}}),null,null,[[1,9]])},className:"add-form"},r.a.createElement("div",{className:"item-add"},r.a.createElement("input",{className:"category",type:"text",value:s,name:"Category",placeholder:"Uusi kategoria",onChange:function(e){var t=e.target;return u(t.value)}}),r.a.createElement("button",{type:"submit",className:"category-add-button"},"Lis\xe4\xe4"))))},he=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),u=s[0],o=s[1],m=Object(n.useState)([]),p=Object(i.a)(m,2),d=p[0],f=p[1],v=Object(n.useState)([]),b=Object(i.a)(v,2),E=b[0],h=b[1],g=Object(n.useState)(!1),j=Object(i.a)(g,2),k=j[0],O=j[1],y=Object(n.useState)(!1),N=Object(i.a)(y,2),S=N[0],w=N[1],x=Object(n.useState)(!1),C=Object(i.a)(x,2),T=C[0],D=C[1],M=Object(n.useState)(!1),K=Object(i.a)(M,2),A=K[0],L=K[1];return Object(n.useEffect)((function(){R().then((function(e){c(e)})),q().then((function(e){o(e)})),J().then((function(e){h(e)})),me().then((function(e){f(e)}))}),[]),r.a.createElement("div",{className:"crls-container"},r.a.createElement("div",{className:"task-types-menu"},A?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"task-types",onClick:function(){return L(!A)}},"Sulje sarjat"),r.a.createElement(be,{series:E,setSeries:h})):r.a.createElement("button",{className:"task-types",onClick:function(){return L(!A)}},"Sarjat")),r.a.createElement("div",{className:"task-types-menu"},S?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"task-types",onClick:function(){return w(!S)}},"Sulje s\xe4\xe4nn\xf6t"),r.a.createElement(ue,{rules:a,setRules:c,categories:u})):r.a.createElement("button",{className:"task-types",onClick:function(){return w(!S)}},"S\xe4\xe4nn\xf6t")),r.a.createElement("div",{className:"task-types-menu"},k?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"task-types",onClick:function(){return O(!k)}},"Sulje kategoriat"),r.a.createElement(Ee,{categories:u,setCategories:o})):r.a.createElement("button",{className:"task-types",onClick:function(){return O(!k)}},"Kategoriat")),r.a.createElement("div",{className:"task-types-menu"},T?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"task-types",onClick:function(){return D(!T)}},"Sulje kielet"),r.a.createElement(fe,{languages:d,setLanguages:f})):r.a.createElement("button",{className:"task-types",onClick:function(){return D(!T)}},"Kielet")))},ge="".concat("/api","/file"),je=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{"Content-Type":"multipart/form-data"}},n.next=3,p.a.awrap(v.a.post(ge,e,t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},ke=a(131),Oe=a.n(ke),ye=a(132),Ne=a.n(ye),Se=(a(385),function(e){var t=e.setText,a=e.setMD,n=e.value,c=new Oe.a;return r.a.createElement(Ne.a,{value:n,renderHTML:function(e){return c.render(e)},onChange:function(e){var n=e.html,r=e.text;t(n),a(r)}})}),we=a(48),xe=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],o=s[1],m=Object(n.useState)(""),f=Object(i.a)(m,2),v=f[0],b=f[1],E=Object(n.useState)(""),h=Object(i.a)(E,2),g=h[0],j=h[1],k=Object(n.useState)(""),O=Object(i.a)(k,2),y=O[0],N=O[1],S=Object(n.useState)(""),w=Object(i.a)(S,2),C=w[0],T=w[1],D=Object(n.useState)(""),M=Object(i.a)(D,2),K=M[0],A=M[1],L=Object(n.useState)(""),P=Object(i.a)(L,2),V=P[0],U=P[1],I=Object(n.useState)(""),H=Object(i.a)(I,2),z=H[0],F=H[1],_=Object(n.useState)([]),B=Object(i.a)(_,2),G=B[0],Y=B[1],q=Object(n.useState)(""),Q=Object(i.a)(q,2),W=Q[0],X=Q[1],Z=Object(n.useState)([]),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(""),ne=Object(i.a)(ae,2),re=ne[0],ce=ne[1],le=Object(n.useState)([]),se=Object(i.a)(le,2),ue=se[0],ie=se[1],oe=Object(n.useState)([]),pe=Object(i.a)(oe,2),de=pe[0],fe=pe[1],ve=Object(n.useState)([]),be=Object(i.a)(ve,2),Ee=be[0],he=be[1],ge=Object(n.useState)(""),ke=Object(i.a)(ge,2),Oe=ke[0],ye=ke[1],Ne=Object(n.useState)(""),xe=Object(i.a)(Ne,2),Ce=xe[0],Te=xe[1],De=Object(n.useState)(""),Me=Object(i.a)(De,2),Ke=Me[0],Ae=Me[1],Le=Object(n.useState)(null),Pe=Object(i.a)(Le,2),Ve=Pe[0],Ue=Pe[1],Je=Object(n.useState)(null),Ie=Object(i.a)(Je,2),He=Ie[0],ze=Ie[1],Fe=Object(n.useState)(null),Re=Object(i.a)(Fe,2),_e=Re[0],Be=Re[1],Ge=Object(n.useState)(null),Ye=Object(i.a)(Ge,2),qe=Ye[0],Qe=Ye[1],We=Object(n.useState)(null),Xe=Object(i.a)(We,2),Ze=Xe[0],$e=Xe[1],et=Object(n.useState)([]),tt=Object(i.a)(et,2),at=tt[0],nt=tt[1];Object(n.useEffect)((function(){R().then((function(e){Y(e)})),J().then((function(e){ie(e)})),me().then((function(e){he(e)}))}),[]);return r.a.createElement("div",{className:"add-task-container"},r.a.createElement("h2",null,"Lis\xe4\xe4 teht\xe4v\xe4"),r.a.createElement(d,{message:a,type:"success"}),r.a.createElement(d,{message:u,type:"error"}),r.a.createElement("form",{onSubmit:function(e){var t,a,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),Ue(null),ze(null),Be(null),Qe(null),$e(null),v.length<1&&Ue("Nimi ei saa olla tyhj\xe4"),g.length<1&&ze("Teht\xe4v\xe4nanto ei saa olla tyhj\xe4"),Ce.length<1&&Be("Lis\xe4\xe4j\xe4n nimi ei saa olla tyhj\xe4"),Ke.length<1&&Qe("Lis\xe4\xe4j\xe4n s\xe4hk\xf6posti ei saa olla tyhj\xe4"),""!==Oe&&""!==W&&""!==de&&""!==re||$e("Valitsethan arvon kaikkiin pudotuskenttiin"),!(v.length<1||g.length<1||Ce.length<1||Ke.length<1||""===Oe||""===W||""===de||""===re)){r.next=13;break}return r.abrupt("return");case 13:if(j(JSON.stringify(g)),N(JSON.stringify(y)),T(JSON.stringify(C)),t=new FormData,at.length>0)for(a=0;a<at.length;a++)t.append("filesToAdd",at[a],at[a].name);return n=[],r.prev=19,r.next=22,p.a.awrap(je(t));case 22:return n=r.sent,r.next=25,p.a.awrap(x({name:v,rule:W,category:re,series:de,language:Oe,assignmentText:g,gradingScale:y,creatorName:Ce,creatorEmail:Ke,supervisorInstructions:C,assignmentTextMD:K,gradingScaleMD:V,supervisorInstructionsMD:z,files:n}));case 25:b(""),X(""),ce(""),fe(""),ye(""),j(""),N(""),Ae(""),Te(""),T(""),c("Teht\xe4v\xe4 lis\xe4tty!"),setTimeout((function(){c(null),window.location.reload()}),2e3),r.next=43;break;case 39:r.prev=39,r.t0=r.catch(19),o("Jotain meni vikaan"),setTimeout((function(){o(null)}),5e3);case 43:case"end":return r.stop()}}),null,null,[[19,39]])}},r.a.createElement("div",null,r.a.createElement(d,{message:Ve,type:"error"}),r.a.createElement("input",{className:"task-title",type:"text",value:v,name:"Name",placeholder:"Teht\xe4v\xe4n nimi",onChange:function(e){var t=e.target;return b(t.value)}})),r.a.createElement("div",null,r.a.createElement("h4",null,"Teht\xe4v\xe4nanto"),r.a.createElement(d,{message:He,type:"error"}),r.a.createElement(Se,{setText:j,setMD:A})),r.a.createElement("div",null,r.a.createElement("h4",null,"Arvostelu"),r.a.createElement(Se,{setText:N,setMD:U})),r.a.createElement("div",{className:"instructions"},r.a.createElement("h4",null,"Rastimiehen ohje"),r.a.createElement(Se,{setText:T,setMD:F})),r.a.createElement(d,{message:Ze,type:"error"}),r.a.createElement("div",{className:"dropdowns"},r.a.createElement("div",null,r.a.createElement("select",{multiple:!0,value:de,onChange:function(e){return function(e){for(var t=e.target.options,a=[],n=0,r=t.length;n<r;n++)t[n].selected&&""!==t[n].value&&a.push(t[n].value);fe(a)}(e)},className:"multiple-series"},r.a.createElement("option",{value:"",className:"series-info"},"Sarja (paina Ctrl, jos useita)"),ue.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",null,r.a.createElement("select",{className:"rule-select",value:W,onChange:function(e){return function(e){if(X(e.target.value),ce(""),e.target.value){var t=G.find((function(t){return t.id===e.target.value}));te(t.acceptedCategories)}else te([])}(e)}},r.a.createElement("option",{value:""},"S\xe4\xe4nn\xf6t"),G.map((function(e){return r.a.createElement("option",{className:"rule-options",key:e.id,value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("select",{className:"category-select",value:re,onChange:function(e){return function(e){ce(e.target.value)}(e)}},r.a.createElement("option",{value:""},"Kategoria"),ee.map((function(e){return r.a.createElement("option",{className:"category-options",key:e.id,value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("select",{className:"language-select",value:Oe,onChange:function(e){return function(e){ye(e.target.value)}(e)}},r.a.createElement("option",{value:""},"Kieli"),Ee.map((function(e){return r.a.createElement("option",{className:"language-options",key:e.id,value:e.id},e.name)}))))),r.a.createElement("div",{className:"creator"},r.a.createElement("div",null,r.a.createElement(d,{message:_e,type:"error"}),r.a.createElement("input",{className:"",type:"text",value:Ce,name:"CreatorName",placeholder:"Lis\xe4\xe4j\xe4n nimi",onChange:function(e){var t=e.target;return Te(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:qe,type:"error"}),r.a.createElement("input",{className:"",type:"text",value:Ke,name:"CreatorEmail",placeholder:"Lis\xe4\xe4j\xe4n s\xe4hk\xf6posti",onChange:function(e){var t=e.target;return Ae(t.value)}}))),r.a.createElement(we.a,{onDrop:function(e){nt(at.concat(e))}},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement("div",{className:"files"},r.a.createElement("div",{className:"title"},"Liitetiedostot"),at.length>0&&r.a.createElement(r.a.Fragment,null,at.map((function(e){return r.a.createElement("div",{key:e.name},e.name,r.a.createElement("b",{onClick:function(t){return function(e,t){e.stopPropagation(),nt(at.filter((function(e){return e.name!==t})))}(t,e.name)}},"x"))})))))})),r.a.createElement("button",{type:"submit",className:"add-task-button"},"Lis\xe4\xe4 teht\xe4v\xe4")))},Ce=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),u=Object(i.a)(l,2),o=u[0],m=u[1],f=Object(n.useState)(null),v=Object(i.a)(f,2),b=v[0],E=v[1];Object(n.useEffect)((function(){if(!g()){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);j(t.token)}}A().then((function(e){c(e)}))}),[]);return r.a.createElement("div",{className:"task-list"},r.a.createElement("h1",null,"Hyv\xe4ksynt\xe4\xe4 odottavat kisateht\xe4v\xe4t"),r.a.createElement(d,{message:o,type:"success"}),r.a.createElement(d,{message:b,type:"error"}),a&&a.length>0&&r.a.createElement("div",{className:"task-list-title"},r.a.createElement("span",null,"Teht\xe4v\xe4n nimi"),r.a.createElement("span",null,"Sarja"),r.a.createElement("span",null,"Kategoria"),r.a.createElement("span",null),r.a.createElement("span",null)),a.map((function(e){return r.a.createElement("div",{className:"task-list-item pending",key:e.id},r.a.createElement("span",null,r.a.createElement(s.b,{to:"/tehtava/".concat(e.id)},e.name)),r.a.createElement("span",null,e.series.map((function(t){return r.a.createElement("div",{key:e.id+t.id},t.name," ")}))),r.a.createElement("span",null,e.category&&e.category.name),r.a.createElement("span",null,r.a.createElement("button",{className:"accept-button",onClick:function(){return function(e){try{L(e),c(a.filter((function(t){return t.id!==e}))),m("Teht\xe4v\xe4 hyv\xe4ksytty"),setTimeout((function(){m(null)}),5e3)}catch(t){E("Jotain meni vikaan"),setTimeout((function(){E(null)}),5e3)}}(e.id)}},"Hyv\xe4ksy"),r.a.createElement("button",{className:"delete-button",onClick:function(){return t=e.id,p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("Haluatko poistaa teht\xe4v\xe4n: ".concat(a.find((function(e){return e.id===t})).name))){e.next=5;break}return e.next=4,p.a.awrap(K(t));case 4:c(a.filter((function(e){return e.id!==t})));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),E("Jotain meni vikaan"),setTimeout((function(){E(null)}),5e3);case 11:case"end":return e.stop()}}),null,null,[[0,7]]);var t}},"Poista")),r.a.createElement("span",null))})))},Te=function(){return r.a.createElement("div",null,r.a.createElement(Ce,null),r.a.createElement(s.b,{to:"/omasivu"},"Omat tiedot"),r.a.createElement("br",null),r.a.createElement(s.b,{to:"/lisaa_admin"},"Lis\xe4\xe4 yll\xe4pit\xe4j\xe4"),r.a.createElement("br",null),r.a.createElement(s.b,{to:"/lisaa_pudotusvalikkoon"},"Hallinnoi s\xe4\xe4nt\xf6j\xe4/kieli\xe4/sarjoja/kategorioita"))},De=function(e){var t=e.setShowEdit,a=e.user,c=e.setUser,l=e.setMessage,s=Object(n.useState)(null),u=Object(i.a)(s,2),o=u[0],m=u[1],f=Object(n.useState)(null),v=Object(i.a)(f,2),b=v[0],E=v[1],h=Object(n.useState)(null),g=Object(i.a)(h,2),j=g[0],k=g[1],O=Object(n.useState)(null),y=Object(i.a)(O,2),N=y[0],S=y[1],w=Object(n.useState)(a.name),x=Object(i.a)(w,2),C=x[0],T=x[1],D=Object(n.useState)(a.username),M=Object(i.a)(D,2),K=M[0],A=M[1],L=Object(n.useState)(a.email),P=Object(i.a)(L,2),V=P[0],U=P[1],J=Object(n.useState)(a.allowNotifications),I=Object(i.a)(J,2),H=I[0],z=I[1];return r.a.createElement("div",{className:"edit-user-form"},r.a.createElement("h2",null,"Omat tiedot"),r.a.createElement(d,{message:o,type:"error"}),r.a.createElement("form",{onSubmit:function(e){var a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),E(null),k(null),S(null),C.length<3&&E("Nimess\xe4 pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),K.length<3&&k("K\xe4ytt\xe4j\xe4tunnuksessa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),V.length<5&&S("S\xe4hk\xf6postissa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 5 kirjainta"),!(C.length<3||K.length<3)){n.next=9;break}return n.abrupt("return");case 9:return n.prev=9,n.next=12,p.a.awrap(le({name:C,username:K,email:V,allowNotifications:H}));case 12:a=n.sent,c(a),window.localStorage.setItem("loggedUser",JSON.stringify(a)),t(!1),l("Tietoja muokattu!"),setTimeout((function(){l(null)}),5e3),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(9),n.t0.response&&n.t0.response.data&&n.t0.response.data.error&&"username already exists"===n.t0.response.data.error?m("K\xe4ytt\xe4j\xe4tunnus on varattu"):m("Muokkaaminen ep\xe4onnistui"),setTimeout((function(){m(null)}),5e3);case 24:case"end":return n.stop()}}),null,null,[[9,20]])}},r.a.createElement("div",null,r.a.createElement(d,{message:b,type:"error"}),r.a.createElement("label",null,"Nimi"),r.a.createElement("br",null),r.a.createElement("input",{className:"name",type:"text",value:C,name:"Name",placeholder:"Nimi",onChange:function(e){var t=e.target;return T(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:j,type:"error"}),r.a.createElement("label",null,"K\xe4ytt\xe4j\xe4tunnus"),r.a.createElement("br",null),r.a.createElement("input",{className:"username",type:"text",value:K,name:"Username",placeholder:"K\xe4ytt\xe4j\xe4tunnus",onChange:function(e){var t=e.target;return A(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:N,type:"error"}),r.a.createElement("label",null,"S\xe4hk\xf6posti"),r.a.createElement("br",null),r.a.createElement("input",{className:"email",type:"text",value:V,name:"Email",placeholder:"S\xe4hk\xf6posti",onChange:function(e){var t=e.target;return U(t.value)}})),r.a.createElement("div",null,r.a.createElement("label",null,"Vastaanota ilmoituksia:",r.a.createElement("div",{className:"admin-radio",onChange:function(e){var t=e.target;return z(t.value)}},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"notifications",value:!0,defaultChecked:H}),"Kyll\xe4"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"notifications",value:!1,defaultChecked:!H}),"Ei")))),r.a.createElement("button",{type:"submit",className:"edit-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return t(!1)},className:"cancel-button"},"Peruuta")))},Me=function(e){var t=e.setShowChangePassword,a=e.setMessage,c=Object(n.useState)(null),l=Object(i.a)(c,2),s=l[0],u=l[1],o=Object(n.useState)(""),m=Object(i.a)(o,2),f=m[0],v=m[1],b=Object(n.useState)(""),E=Object(i.a)(b,2),h=E[0],g=E[1],j=Object(n.useState)(""),k=Object(i.a)(j,2),O=k[0],y=k[1];return r.a.createElement("div",{className:"change-password-form"},r.a.createElement("h2",null,"Vaihda salasana"),r.a.createElement(d,{message:s,type:"error"}),r.a.createElement("form",{onSubmit:function(e){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),u(null),!(h.length<3)){n.next=5;break}return u("Salasanassa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),n.abrupt("return");case 5:if(h===O){n.next=8;break}return u("Salasanat eiv\xe4t t\xe4sm\xe4\xe4"),n.abrupt("return");case 8:return n.prev=8,n.next=11,p.a.awrap(le({oldPassword:f,newPassword:h}));case 11:v(""),g(""),y(""),t(!1),a("Salasana vaihdettu!"),setTimeout((function(){a(null)}),5e3),n.next=23;break;case 19:n.prev=19,n.t0=n.catch(8),n.t0.response&&n.t0.response.data&&n.t0.response.data.error&&"incorrect password"===n.t0.response.data.error?u("Vanha salasana ei t\xe4sm\xe4\xe4"):u("Salasanan vaihtaminen ep\xe4onnistui"),setTimeout((function(){u(null)}),5e3);case 23:case"end":return n.stop()}}),null,null,[[8,19]])}},r.a.createElement("div",null,r.a.createElement("input",{className:"old-password",type:"password",value:f,placeholder:"Vanha salasana",onChange:function(e){var t=e.target;return v(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"new-password",type:"password",value:h,placeholder:"Uusi salasana",onChange:function(e){var t=e.target;return g(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"new-password-again",type:"password",value:O,placeholder:"Uusi salasana uudelleen",onChange:function(e){var t=e.target;return y(t.value)}})),r.a.createElement("button",{type:"submit",className:"change-password-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return t(!1)},className:"cancel-button"},"Peruuta")))},Ke=function(e){var t=e.user,a=e.setUser,c=Object(n.useState)(null),l=Object(i.a)(c,2),s=l[0],u=l[1],o=Object(n.useState)(!1),m=Object(i.a)(o,2),p=m[0],f=m[1],v=Object(n.useState)(!1),b=Object(i.a)(v,2),E=b[0],h=b[1];return r.a.createElement("div",null,t&&r.a.createElement("div",{className:"user-info"},!p&&!E&&r.a.createElement("div",null,r.a.createElement(d,{message:s,type:"success"}),r.a.createElement("h2",null,"Omat tiedot"),r.a.createElement("p",null,r.a.createElement("b",null,"Nimi: "),t.name),r.a.createElement("p",null,r.a.createElement("b",null,"K\xe4ytt\xe4j\xe4tunnus: "),t.username),r.a.createElement("p",null,r.a.createElement("b",null,"S\xe4hk\xf6postiosoite: "),t.email),r.a.createElement("p",null,r.a.createElement("b",null,"Ilmoitukset: "),t.allowNotifications?r.a.createElement("span",null,"P\xe4\xe4ll\xe4"):r.a.createElement("span",null,"Pois p\xe4\xe4lt\xe4")),r.a.createElement("button",{className:"edit-user-button",onClick:function(){return h(!1),void f(!0)}},"Muokkaa"),r.a.createElement("button",{className:"change-password-button",onClick:function(){return f(!1),void h(!0)}},"Vaihda salasana")),p&&r.a.createElement(De,{setShowEdit:f,user:t,setUser:a,setMessage:u}),E&&r.a.createElement(Me,{setShowChangePassword:h,setMessage:u})))},Ae=function(e){var t=e.setModifyVisible,a=e.task,c=e.setTask,l=Object(n.useState)(""),s=Object(i.a)(l,2),u=s[0],o=s[1],m=Object(n.useState)(""),f=Object(i.a)(m,2),v=f[0],b=f[1],E=Object(n.useState)(a.name),h=Object(i.a)(E,2),g=h[0],j=h[1],k=Object(n.useState)(a.assignmentText),O=Object(i.a)(k,2),y=O[0],N=O[1],S=Object(n.useState)(a.gradingScale),w=Object(i.a)(S,2),x=w[0],C=w[1],T=Object(n.useState)(a.supervisorInstructions),D=Object(i.a)(T,2),K=D[0],A=D[1],L=Object(n.useState)(a.assignmentTextMD),P=Object(i.a)(L,2),V=P[0],U=P[1],I=Object(n.useState)(a.gradingScaleMD),H=Object(i.a)(I,2),z=H[0],F=H[1],_=Object(n.useState)(a.supervisorInstructionsMD),B=Object(i.a)(_,2),G=B[0],Y=B[1],q=Object(n.useState)([]),Q=Object(i.a)(q,2),W=Q[0],X=Q[1],Z=Object(n.useState)(a.rules?a.rules.id:null),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)([]),ne=Object(i.a)(ae,2),re=ne[0],ce=ne[1],le=Object(n.useState)(a.category?a.category.id:null),se=Object(i.a)(le,2),ue=se[0],ie=se[1],oe=Object(n.useState)([]),pe=Object(i.a)(oe,2),de=pe[0],fe=pe[1],ve=Object(n.useState)(a.series.map((function(e){return e.id}))),be=Object(i.a)(ve,2),Ee=be[0],he=be[1],ge=Object(n.useState)([]),ke=Object(i.a)(ge,2),Oe=ke[0],ye=ke[1],Ne=Object(n.useState)(a.language?a.language.id:null),xe=Object(i.a)(Ne,2),Ce=xe[0],Te=xe[1],De=Object(n.useState)(a.creatorName),Me=Object(i.a)(De,2),Ke=Me[0],Ae=Me[1],Le=Object(n.useState)(a.creatorEmail),Pe=Object(i.a)(Le,2),Ve=Pe[0],Ue=Pe[1],Je=Object(n.useState)(null),Ie=Object(i.a)(Je,2),He=Ie[0],ze=Ie[1],Fe=Object(n.useState)(null),Re=Object(i.a)(Fe,2),_e=Re[0],Be=Re[1],Ge=Object(n.useState)(null),Ye=Object(i.a)(Ge,2),qe=Ye[0],Qe=Ye[1],We=Object(n.useState)(null),Xe=Object(i.a)(We,2),Ze=Xe[0],$e=Xe[1],et=Object(n.useState)(null),tt=Object(i.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)(a.files||[]),ct=Object(i.a)(rt,2),lt=ct[0],st=ct[1],ut=Object(n.useState)([]),it=Object(i.a)(ut,2),ot=it[0],mt=it[1],pt=Object(n.useState)([]),dt=Object(i.a)(pt,2),ft=dt[0],vt=dt[1],bt=a.id;Object(n.useEffect)((function(){R().then((function(e){if(X(e),a.rules&&a.rules.id){var t=e.find((function(e){return e.id===a.rules.id}));t&&ce(t.acceptedCategories)}})),J().then((function(e){fe(e)})),me().then((function(e){ye(e)}))}),[]);return r.a.createElement("div",{className:"modify-task-container"},r.a.createElement("h2",null,"Muokkaa teht\xe4v\xe4\xe4"),r.a.createElement(d,{message:u,type:"success"}),r.a.createElement(d,{message:v,type:"error"}),r.a.createElement("form",{onSubmit:function(e){var t,a,n,r;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.preventDefault(),ze(null),Be(null),Qe(null),$e(null),nt(null),g.length<1&&ze("Nimi ei saa olla tyhj\xe4"),y.length<1&&Be("Teht\xe4v\xe4nanto ei saa olla tyhj\xe4"),Ke.length<1&&Qe("Lis\xe4\xe4j\xe4n nimi ei saa olla tyhj\xe4"),Ve.length<1&&$e("Lis\xe4\xe4j\xe4n s\xe4hk\xf6posti ei saa olla tyhj\xe4"),""!==Ce&&""!==ee&&""!==Ee&&""!==ue||nt("Valitsethan arvon kaikkiin pudotuskenttiin"),!(g.length<1||y.length<1||Ke.length<1||Ve.length<1||""===Ce||""===ee||""===Ee||""===ue)){l.next=13;break}return l.abrupt("return");case 13:if((t=new FormData).append("filesToDelete",ft),ot.length>0)for(a=0;a<ot.length;a++)t.append("filesToAdd",ot[a],ot[a].name);return n=[],l.prev=17,l.next=20,p.a.awrap(je(t));case 20:return n=l.sent,l.next=23,p.a.awrap(M({name:g,rule:ee,category:ue,series:Ee,language:Ce,assignmentText:y,gradingScale:x,creatorName:Ke,creatorEmail:Ve,supervisorInstructions:K,id:bt,assignmentTextMD:V,gradingScaleMD:z,supervisorInstructionsMD:G,files:lt.concat(n)}));case 23:r=l.sent,o("Teht\xe4v\xe4 tallennettu!"),c(r),setTimeout((function(){o(null),window.location.reload()}),1e3),l.next=33;break;case 29:l.prev=29,l.t0=l.catch(17),b("Jotain meni vikaan"),setTimeout((function(){b(null)}),5e3);case 33:case"end":return l.stop()}}),null,null,[[17,29]])},className:"modify-form"},r.a.createElement("div",null,r.a.createElement(d,{message:He,type:"error"}),r.a.createElement("input",{className:"task-title",type:"text",defaultValue:g,name:"Name",placeholder:"Teht\xe4v\xe4n nimi",onChange:function(e){var t=e.target;return j(t.value)}})),r.a.createElement("div",null,r.a.createElement("h4",null,"Teht\xe4v\xe4nanto"),r.a.createElement(d,{message:_e,type:"error"}),r.a.createElement(Se,{setText:N,setMD:U,value:V,placeHolder:"Teht\xe4v\xe4nanto"})),r.a.createElement("div",null,r.a.createElement("h4",null,"Arvostelu"),r.a.createElement(Se,{setText:C,setMD:F,value:z,placeHolder:"Arvostelu"})),r.a.createElement("div",{className:"instructions"},r.a.createElement("h4",null,"Rastimiehen ohje"),r.a.createElement(Se,{setText:A,setMD:Y,value:G,placeHolder:"Rastimiehen ohje"})),r.a.createElement(d,{message:at,type:"error"}),r.a.createElement("div",{className:"dropdowns"},r.a.createElement("div",null,r.a.createElement("select",{multiple:!0,value:Ee,onChange:function(e){return function(e){for(var t=e.target.options,a=[],n=0,r=t.length;n<r;n++)t[n].selected&&""!==t[n].value&&a.push(t[n].value);he(a)}(e)},className:"multiple-series"},r.a.createElement("option",{value:"",className:"series-info"},"Sarja (paina Ctrl, jos useita)"),de.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",null,r.a.createElement("select",{value:ee,onChange:function(e){return function(e){if(te(e.target.value),ie(""),e.target.value){var t=W.find((function(t){return t.id===e.target.value}));ce(t.acceptedCategories)}else ce([])}(e)}},r.a.createElement("option",{value:""},"S\xe4\xe4nn\xf6t"),W.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("select",{value:ue,onChange:function(e){return function(e){ie(e.target.value)}(e)}},r.a.createElement("option",{value:""},"Kategoria"),re.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("select",{value:Ce,onChange:function(e){return function(e){Te(e.target.value)}(e)}},r.a.createElement("option",{value:""},"Kieli"),Oe.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),r.a.createElement("div",{className:"creator"},r.a.createElement("div",null,r.a.createElement(d,{message:qe,type:"error"}),r.a.createElement("input",{className:"",type:"text",defaultValue:Ke,name:"CreatorName",placeholder:"Muokkaajan nimi",onChange:function(e){var t=e.target;return Ae(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:Ze,type:"error"}),r.a.createElement("input",{className:"",type:"text",defaultValue:Ve,name:"CreatorEmail",placeholder:"Muokkaajan s\xe4hk\xf6posti",onChange:function(e){var t=e.target;return Ue(t.value)}}))),r.a.createElement(we.a,{onDrop:function(e){mt(ot.concat(e))}},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement("div",{className:"files"},r.a.createElement("div",{className:"title"},"Liitetiedostot"),lt&&lt.length>0&&r.a.createElement(r.a.Fragment,null,lt.map((function(e){return r.a.createElement("div",{key:e},e.substring(e.indexOf("-")+1,e.length),r.a.createElement("b",{onClick:function(t){return function(e,t){e.stopPropagation(),st(lt.filter((function(e){return e!==t}))),vt(ft.concat(t))}(t,e)}},"x"))}))),ot&&ot.length>0&&r.a.createElement(r.a.Fragment,null,ot.map((function(e){return r.a.createElement("div",{key:e.name},e.name,r.a.createElement("b",{onClick:function(t){return function(e,t){e.stopPropagation(),mt(ot.filter((function(e){return e.name!==t})))}(t,e.name)}},"x"))})))))})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"save-task-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){t(!1)},className:"return-button"},"Peruuta"))))},Le=function(e){var t=e.text;return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:"".concat(t)}})},Pe=a(134),Ve=a.n(Pe),Ue=function(e){var t=e.match,a=e.user,c=e.addTaskToBasket,l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],m=s[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),v=f[0],b=f[1],E=Object(n.useState)(null),h=Object(i.a)(E,2),g=h[0],j=h[1],k=Object(n.useState)(null),O=Object(i.a)(k,2),y=O[0],N=O[1],S=Object(o.f)();Object(n.useEffect)((function(){T(t.params.id).then((function(e){m(e)}))}),[]);return r.a.createElement("div",null,v?r.a.createElement(Ae,{setModifyVisible:b,task:u,setTask:m}):r.a.createElement("div",{className:"task-view-info-background"},r.a.createElement(d,{message:g,type:"success"}),r.a.createElement(d,{message:y,type:"error"}),u&&r.a.createElement("div",{className:"task-view-info"},r.a.createElement("div",null,r.a.createElement("h2",null,u.name,r.a.createElement("span",null,r.a.createElement("div",{className:"black-basket basket-task-view",onClick:function(){return c(u)}})))),r.a.createElement("h3",null,"Teht\xe4v\xe4nanto:"),r.a.createElement(Le,{text:u.assignmentText}),r.a.createElement("h3",null,"Rastimiehen ohjeet:"),r.a.createElement(Le,{text:u.supervisorInstructions}),r.a.createElement("h3",null,"Arvosteluasteikko:"),r.a.createElement(Le,{text:u.gradingScale}),r.a.createElement("h3",null,"Sarja:"),u.series.map((function(e){return r.a.createElement("span",{key:u.id+e.id},e.name,r.a.createElement("br",null))})),r.a.createElement("h3",null,"Kategoria:"),r.a.createElement("p",null,u.category&&u.category.name),r.a.createElement("h3",null,"S\xe4\xe4nt\xf6luokka:"),r.a.createElement("p",null,u.rules&&u.rules.name),r.a.createElement("h3",null,"Teht\xe4v\xe4n viimeisin muokkaaja:"),r.a.createElement("p",null,u.creatorName,r.a.createElement("br",null),u.creatorEmail),r.a.createElement("h3",null,"Teht\xe4v\xe4 lis\xe4tty:"),u.created&&r.a.createElement("p",null,r.a.createElement(Ve.a,{format:"DD.MM.YYYY HH:mm"},u.created)),r.a.createElement("h3",null,"Liitetiedostot:"),u.files&&0===u.files.length&&r.a.createElement("p",null,"-"),u.files&&u.files.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("a",{href:"https://kisapankki.blob.core.windows.net/files/".concat(e)},e.substring(e.indexOf("-")+1,e.length)))})),a&&r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:function(){return b(!0)},className:"modify-view-button"},"Muokkaa"),u.pending&&r.a.createElement("button",{className:"accept-button",onClick:function(){return function(){try{L(u.id),j("Teht\xe4v\xe4 hyv\xe4ksytty"),setTimeout((function(){j(null),S.push("/admin")}),2e3)}catch(e){N("Jotain meni vikaan"),setTimeout((function(){N(null)}),5e3)}}()}},"Hyv\xe4ksy"),r.a.createElement("button",{className:"delete-button",onClick:function(){return function(){try{window.confirm("Haluatko poistaa teht\xe4v\xe4n: ".concat(u.name))&&(K(u.id),j("Teht\xe4v\xe4 poistettu"),setTimeout((function(){j(null),u.pending?S.push("/admin"):S.push("/")}),2e3))}catch(e){N("Jotain meni vikaan"),setTimeout((function(){N(null)}),5e3)}}()}},"Poista")))))},Je=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),m=Object(i.a)(l,2),p=m[0],d=m[1],f=Object(n.useState)(null),v=Object(i.a)(f,2),b=v[0],E=v[1],h=Object(o.f)();Object(n.useEffect)((function(){C().then((function(e){d(e)}));var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);E(t),j(t.token)}var a=window.localStorage.getItem("basket");if(a){var n=JSON.parse(a);c(n)}}),[]),Object(n.useEffect)((function(){window.localStorage.setItem("basket",JSON.stringify(a))}),[a]);var g=function(e){a.find((function(t){return t.id===e.id}))||c(a.concat(e))},O=function(e){c(a.filter((function(t){return t.id!==e})))},y=function(e){P(e).then((function(t){d(p.map((function(t){return t.id!==e?t:Object(u.a)({},t,{views:t.views+1})}))),c(a.map((function(t){return t.id!==e?t:Object(u.a)({},t,{views:t.views+1})})))}))};return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement(s.b,{to:"/"},r.a.createElement("div",{className:"logo"})),r.a.createElement(s.b,{to:"/tehtavat"},r.a.createElement("button",{className:"addtask-button-header"},"Teht\xe4v\xe4t")),r.a.createElement(s.b,{to:"/lisaa_tehtava"},r.a.createElement("button",{className:"addtask-button-header"},"Lis\xe4\xe4 teht\xe4v\xe4")),null===b?r.a.createElement(n.Fragment,null,r.a.createElement(s.b,{to:"/kirjautuminen"},r.a.createElement("button",{className:"login-button-header"},"Kirjaudu"))):r.a.createElement(n.Fragment,null,r.a.createElement(s.b,{to:"/admin"},r.a.createElement("button",{className:"admin-button-header"},"Admin")),r.a.createElement("div",null,r.a.createElement("div",{className:"logged"},"Kirjautuneena ",r.a.createElement(s.b,{to:"/omasivu",className:"username-header"},b.username)),r.a.createElement("div",{className:"logout"},r.a.createElement("button",{className:"logout-button-header",onClick:function(){return window.localStorage.removeItem("loggedUser"),E(null),j(null),h.push("/"),void window.location.reload()}},"Kirjaudu ulos")))),r.a.createElement(s.b,{to:"/valitut_tehtavat"},r.a.createElement("div",{className:"white-basket"},a.length>0&&r.a.createElement("span",{className:"number-of-tasks-in-basket"},a.length)))),r.a.createElement("div",{className:"admin-task-buttons-mobile"},r.a.createElement(s.b,{to:"/tehtavat"},r.a.createElement("button",{className:"addtask-button-mobile"},"Teht\xe4v\xe4t")),r.a.createElement(s.b,{to:"/lisaa_tehtava"},r.a.createElement("button",{className:"addtask-button-mobile"},"Lis\xe4\xe4 teht\xe4v\xe4")),null!==b&&r.a.createElement(s.b,{to:"/admin"},r.a.createElement("button",{className:"admin-button-mobile"},"Admin"))),r.a.createElement("div",{className:"container"},r.a.createElement(o.b,{exact:!0,path:"/",render:function(){return r.a.createElement(N,{tasks:p,addTaskToBasket:g})}}),r.a.createElement(o.b,{exact:!0,path:"/tehtava/:id",render:function(e){return r.a.createElement(Ue,Object.assign({},e,{user:b,addTaskToBasket:g}))}}),r.a.createElement(o.b,{path:"/tehtavat",render:function(){return r.a.createElement(te,{user:b,originalTasks:p,addTaskToBasket:g,handleUpdateViews:y})}}),r.a.createElement(o.b,{path:"/valitut_tehtavat",render:function(){return r.a.createElement(ae,{tasks:a,removeTaskFromBasket:O,handleUpdateViews:y})}}),r.a.createElement(o.b,{path:"/kirjautuminen",render:function(){return r.a.createElement(k,{setUser:E})}}),r.a.createElement(o.b,{path:"/lisaa_tehtava",render:function(){return r.a.createElement(xe,null)}}),r.a.createElement(o.b,{path:"/omasivu",render:function(){return localStorage.getItem("loggedUser")?r.a.createElement(Ke,{user:b,setUser:E}):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/admin",render:function(){return localStorage.getItem("loggedUser")?r.a.createElement(Te,null):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/lisaa_admin",render:function(){return localStorage.getItem("loggedUser")?r.a.createElement(se,null):r.a.createElement(o.a,{to:"/"})}}),r.a.createElement(o.b,{path:"/lisaa_pudotusvalikkoon",render:function(){return localStorage.getItem("loggedUser")?r.a.createElement(he,null):r.a.createElement(o.a,{to:"/"})}})))};a(387);l.a.render(r.a.createElement(s.a,null,r.a.createElement(Je,null)),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.83264b07.chunk.js.map