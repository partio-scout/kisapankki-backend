{"version":3,"sources":["components/Notification.js","services/login.js","components/Login.js","services/signup.js","components/SignUp.js","App.js","index.js"],"names":["Notification","message","className","baseUrl","process","credentials","a","async","axios","post","response","data","Login","setUser","setPage","useState","errorMessage","setErrorMessage","username","setUsername","password","setPassword","onSubmit","event","preventDefault","loginService","user","window","localStorage","setItem","JSON","stringify","setTimeout","type","value","name","placeholder","onChange","target","console","log","SignUp","nameErrorMessage","setNameErrorMessage","usernameErrorMessage","setUsernameErrorMessage","passwordErrorMessage","setPasswordErrorMessage","setName","key","setKey","length","signupService","App","page","useEffect","loggedUserJSON","getItem","parse","toPage","onClick","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.24ad6e1d.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import axios from 'axios'\r\nconst baseUrl = `${process.env.REACT_APP_API_URL}/login`\r\n\r\nconst login = async (credentials) => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { login }\r\n","import React, { useState } from 'react'\r\nimport Notification from './Notification'\r\nimport loginService from '../services/login'\r\n\r\nconst Login = ({ setUser, setPage }) => {\r\n\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('') \r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault()\r\n    try {\r\n      const user = await loginService.login({\r\n        username, password,\r\n      })\r\n      window.localStorage.setItem(\r\n        'loggedUser', JSON.stringify(user)\r\n      )\r\n      setUser(user)\r\n      setUsername('')\r\n      setPassword('')\r\n      setPage('tasks')\r\n    } catch (exception) {\r\n      setErrorMessage('Väärä käyttäjätunnus/salasana')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"login-form\">\r\n      <h2>Kirjaudu sisään</h2>\r\n      <Notification message={errorMessage} />\r\n      <form onSubmit={handleLogin}>\r\n        <div>\r\n          <input\r\n            className=\"username\"\r\n            type=\"text\"\r\n            value={username}\r\n            name=\"Username\"\r\n            placeholder=\"Käyttäjätunnus\"\r\n            onChange={({ target }) => setUsername(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <input\r\n            className=\"password\"\r\n            type=\"password\"\r\n            value={password}\r\n            name=\"Password\"\r\n            placeholder=\"Salasana\"\r\n            onChange={({ target }) => setPassword(target.value)}\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"login-button\">Kirjaudu</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = `${process.env.REACT_APP_API_URL}/signup`\r\n\r\nconst signup = async (credentials) => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  console.log(baseUrl)\r\n  return response.data\r\n}\r\n\r\nexport default { signup }\r\n","import React, { useState } from 'react'\r\nimport Notification from './Notification'\r\nimport signupService from '../services/signup'\r\n\r\nconst SignUp = ({ setUser, setPage }) => {\r\n\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [nameErrorMessage, setNameErrorMessage] = useState(null)\r\n  const [usernameErrorMessage, setUsernameErrorMessage] = useState(null)\r\n  const [passwordErrorMessage, setPasswordErrorMessage] = useState(null)\r\n  const [name, setName] = useState('')\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [key, setKey] = useState('')\r\n\r\n  const handleSignUp = async (event) => {\r\n    event.preventDefault()\r\n    setNameErrorMessage(null)\r\n    setUsernameErrorMessage(null)\r\n    setPasswordErrorMessage(null)\r\n    if (name.length < 3) {\r\n      setNameErrorMessage('Nimessä pitää olla vähintään 3 kirjainta')\r\n    } \r\n    if (username.length < 3) {\r\n      setUsernameErrorMessage('Käyttäjätunnuksessa pitää olla vähintään 3 kirjainta')\r\n    }\r\n    if (password.length < 3) {\r\n      setPasswordErrorMessage('Salasanassa pitää olla vähintään 3 kirjainta')\r\n    }\r\n    if (name.length < 3 || username.length < 3 || password.length < 3) {\r\n      return\r\n    }\r\n    try {\r\n      const user = await signupService.signup({\r\n        name, username, password, key,\r\n      })\r\n      window.localStorage.setItem(\r\n        'loggedUser', JSON.stringify(user)\r\n      )\r\n      setUser(user)\r\n      setName('')\r\n      setUsername('')\r\n      setPassword('')\r\n      setKey('')\r\n      setPage('tasks')\r\n    } catch (exception) {\r\n      setErrorMessage('Rekisteröityminen epäonnistui')\r\n      setTimeout(() => {\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"signup-form\">\r\n      <h2>Rekisteröidy</h2>\r\n      <Notification message={errorMessage} />\r\n      <form onSubmit={handleSignUp}>\r\n        <div>\r\n          <Notification message={nameErrorMessage} />\r\n          <input\r\n            className=\"name\"\r\n            type=\"text\"\r\n            value={name}\r\n            name=\"Name\"\r\n            placeholder=\"Nimi\"\r\n            onChange={({ target }) => setName(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Notification message={usernameErrorMessage} />\r\n          <input\r\n            className=\"username\"\r\n            type=\"text\"\r\n            value={username}\r\n            name=\"Username\"\r\n            placeholder=\"Käyttäjätunnus\"\r\n            onChange={({ target }) => setUsername(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Notification message={passwordErrorMessage} />\r\n          <input\r\n            className=\"password\"\r\n            type=\"password\"\r\n            value={password}\r\n            name=\"Password\"\r\n            placeholder=\"Salasana\"\r\n            onChange={({ target }) => setPassword(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <input\r\n            className=\"key\"\r\n            type=\"text\"\r\n            value={key}\r\n            name=\"Key\"\r\n            placeholder=\"Avain\"\r\n            onChange={({ target }) => setKey(target.value)}\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"signup-button\">Rekisteröidy</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SignUp\r\n","import React, { useState, useEffect, Fragment } from 'react'\r\nimport Login from './components/Login'\r\nimport SignUp from './components/SignUp'\r\n\r\nconst App = () => {\r\n\r\n  const [page, setPage] = useState('tasks')\r\n  const [user, setUser] = useState(null)\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedUser')\r\n    if (loggedUserJSON) {\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n    }\r\n  }, [])\r\n\r\n  const toPage = (page) => (event) => {\r\n    event.preventDefault()\r\n    setPage(page)\r\n  }\r\n\r\n  const content = () => {\r\n    if (page === 'tasks') {\r\n      return <div></div>\r\n    } else if (page === 'login') {\r\n      return <Login setUser={setUser} setPage={setPage} />\r\n    } else if (page === 'signup') {\r\n      return <SignUp setUser={setUser} setPage={setPage} />\r\n    }\r\n  }\r\n\r\n  const logout = () => {\r\n    window.localStorage.removeItem('loggedUser')\r\n    setUser(null)\r\n    toPage('tasks')\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <div className=\"header\">\r\n        <div className=\"logo\" onClick={toPage('tasks')}></div>\r\n        {user === null ?\r\n          <Fragment>\r\n            <button className=\"login-button-header\" onClick={toPage('login')}>Kirjaudu</button>\r\n            <button className=\"signup-button-header\" onClick={toPage('signup')}>Rekisteröidy</button>\r\n          </Fragment>\r\n          :\r\n          <div>\r\n            <div className=\"logged\">Kirjautuneena {user.username}</div>\r\n            <div className=\"logout\"><button className=\"logout-button-header\" onClick={() => logout()}>Kirjaudu ulos</button></div>\r\n          </div>\r\n        }\r\n      </div>\r\n      <div className=\"container\">\r\n        <h1>Kisatehtäväpankki</h1>\r\n        {content()}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root'),\r\n)\r\n"],"sourceRoot":""}