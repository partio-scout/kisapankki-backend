(this.webpackJsonpkisapankki=this.webpackJsonpkisapankki||[]).push([[0],{137:function(e,t,a){e.exports=a(390)},389:function(e,t,a){},390:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),s=a.n(c),l=a(8),u=a(1),i=a(23),o=a(2),m=a.n(o),p=a(3),d=function(e){var t=e.message,a=e.type;return null===t?null:r.a.createElement("div",{className:a},t)},f=a(6),v=a.n(f),b="".concat("/api","/login"),E={login:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post(b,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=null,h=function(){return g},k=function(e){g="bearer ".concat(e)},j=function(e){var t=e.setUser,a=Object(n.useState)(null),c=Object(u.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)(""),f=Object(u.a)(o,2),v=f[0],b=f[1],g=Object(n.useState)(""),h=Object(u.a)(g,2),j=h[0],O=h[1],y=Object(n.useState)(""),N=Object(u.a)(y,2),S=N[0],w=N[1],x=Object(i.f)(),C=function(){var e=Object(p.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,E.login({username:v,email:j,password:S});case 4:n=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(n)),t(n),k(n.token),b(""),O(""),w(""),x.push("/"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),l("V\xe4\xe4r\xe4 k\xe4ytt\xe4j\xe4tunnus/salasana"),setTimeout((function(){l(null)}),5e3);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-form"},r.a.createElement("h2",null,"Kirjaudu sis\xe4\xe4n"),r.a.createElement(d,{message:s,type:"error"}),r.a.createElement("form",{onSubmit:C},r.a.createElement("div",null,r.a.createElement("input",{className:"username",type:"text",value:v,name:"Username",placeholder:"K\xe4ytt\xe4j\xe4tunnus",onChange:function(e){var t=e.target;return b(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"password",type:"password",value:S,name:"Password",placeholder:"Salasana",onChange:function(e){var t=e.target;return w(t.value)}})),r.a.createElement("button",{type:"submit",className:"login-button"},"Kirjaudu")))},O=a(16),y=a(77),N=function(){return r.a.createElement("div",{className:"frontpage-info"},r.a.createElement("h2",null,"Kisateht\xe4v\xe4pankki"),r.a.createElement("p",null,"Kisateht\xe4v\xe4pankki on arkisto, johon voidaan tallettaa teht\xe4vi\xe4. Sivustolle voi tallettaa teht\xe4v\xe4n, sek\xe4 siihen liittyv\xe4t liitetiedostot."),r.a.createElement("p",null,'Kirjautumattomana k\xe4ytt\xe4j\xe4n\xe4 voit koostaa teht\xe4vist\xe4 kisaa varten kokonaisuuksia, sek\xe4 ladata ne PDF-tiedostona itsellesi. Teht\xe4v\xe4n lis\xe4\xe4minen "kisakoriin" onnistuu painamalla teht\xe4v\xe4ss\xe4 esiintyv\xe4\xe4 koripainiketta, ja jo mukaan otetut teht\xe4v\xe4t l\xf6yd\xe4t yl\xe4reunan koria painamalla.'),r.a.createElement("p",null,"Voit my\xf6skin selailla teht\xe4vi\xe4, arvostella teht\xe4vi\xe4 ja lis\xe4t\xe4 uusia teht\xe4vi\xe4. Uuden teht\xe4v\xe4n lis\xe4\xe4minen arkistoon vaatii ensin yll\xe4pit\xe4j\xe4n hyv\xe4ksynn\xe4n uudelle teht\xe4v\xe4lle."))},S="".concat("/api","/task"),w="".concat("/api","/task/pending"),x=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(S);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h()}},e.next=3,v.a.get(w,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat(S,"/search"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(S,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,(n=h())&&(a={headers:{Authorization:n}}),e.next=5,v.a.post(S,t,a);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,(n=h())&&(a={headers:{Authorization:n}}),e.next=5,v.a.put("".concat(S,"/").concat(t.id),t,a);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.delete("".concat(S,"/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.put("".concat(S,"/").concat(t,"/accept"),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat(S,"/").concat(t,"/rate"),a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),M={addtask:L,getTasks:x,getOneTask:D,getSearchedTasks:T,updateTask:A,deleteTask:U,getPendingTasks:C,acceptTask:P,updateViews:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat(S,"/").concat(t,"/views"));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addRating:K,makePDF:function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"multipart/form-data"},responseType:"blob"},e.next=3,v.a.post("".concat(S,"/").concat(a,"/pdf"),t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),makePDFs:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"multipart/form-data"},responseType:"blob"},e.next=3,v.a.post("".concat(S,"/pdf"),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J=function(e){var t=e.tasks,a=e.addTaskToBasket,c=e.handleUpdateTask,s=Object(n.useState)([]),i=Object(u.a)(s,2),o=i[0],d=i[1],f=Object(n.useState)([]),v=Object(u.a)(f,2),b=v[0],E=v[1];Object(n.useEffect)((function(){d(Object(y.a)(t).sort(h).slice(0,5)),E(Object(y.a)(t).sort(k).slice(0,5))}),[t]);var g=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateViews(t.id);case 3:c(Object(O.a)({},t,{views:t.views+1})),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e,t){return t.created.localeCompare(e.created)},k=function(e,t){return t.ratingsAVG-e.ratingsAVG};return r.a.createElement("div",{className:"frontpage"},r.a.createElement("h1",null,"Tervetuloa Kisateht\xe4v\xe4pankkiin!"),r.a.createElement("div",{className:"task-list frontpage-container"},r.a.createElement(N,null),r.a.createElement("div",{className:"new-favorite-lists"},r.a.createElement("div",{className:"new-list"},r.a.createElement("div",{className:"image-on-background"},r.a.createElement("h2",null,"Uusimmat teht\xe4v\xe4t"),r.a.createElement("div",{className:"task-list-title frontpage-item"},r.a.createElement("span",null,"Teht\xe4v\xe4n nimi"),r.a.createElement("span",null,"Sarja"),r.a.createElement("span",null,"Kategoria"),r.a.createElement("span",null))),o.map((function(e){return r.a.createElement(l.b,{className:"no-underline",to:"/tehtava/".concat(e.id),onClick:function(){return g(e)},key:e.id},r.a.createElement("div",{className:"task-list-item frontpage-item new-item"},r.a.createElement("div",{className:"black-basket-mobile",title:"Lis\xe4\xe4 koriin",onClick:function(t){return a(t,e)}}),r.a.createElement("span",{className:"span-bigger"},r.a.createElement("p",{className:"bigger-task-name-frontpage"},e.name),r.a.createElement("p",null,"Katselukertoja: ",e.views)),r.a.createElement("span",null,e.series.map((function(t){return r.a.createElement("div",{key:e.id+t.id},t.name," ")}))),r.a.createElement("span",null,e.category&&e.category.name),r.a.createElement("span",null,r.a.createElement("div",{className:"black-basket",title:"Lis\xe4\xe4 koriin",onClick:function(t){return a(t,e)}}))))}))),r.a.createElement("div",{className:"favorite-list"},r.a.createElement("div",{className:"image-on-background"},r.a.createElement("h2",null,"Suosituimmat teht\xe4v\xe4t"),r.a.createElement("div",{className:"task-list-title frontpage-item"},r.a.createElement("span",null,"Teht\xe4v\xe4n nimi"),r.a.createElement("span",null,"Sarja"),r.a.createElement("span",null,"Kategoria"),r.a.createElement("span",null))),b.map((function(e){return r.a.createElement(l.b,{className:"no-underline",to:"/tehtava/".concat(e.id),onClick:function(){return g(e)},key:e.id},r.a.createElement("div",{className:"task-list-item frontpage-item favorite-item"},r.a.createElement("div",{className:"black-basket-mobile",title:"Lis\xe4\xe4 koriin",onClick:function(t){return a(t,e)}}),r.a.createElement("span",{className:"span-bigger"},r.a.createElement("p",{className:"bigger-task-name-frontpage"},e.name),r.a.createElement("p",null,"Katselukertoja: ",e.views)),r.a.createElement("span",null,e.series.map((function(t){return r.a.createElement("div",{key:e.id+t.id},t.name," ")}))),r.a.createElement("span",null,e.category&&e.category.name),r.a.createElement("span",null,r.a.createElement("div",{className:"black-basket",title:"Lis\xe4\xe4 koriin",onClick:function(t){return a(t,e)}}))))}))))),r.a.createElement("footer",null,r.a.createElement("p",null,"Kuva: Suomen Partiolaiset/Eeva Helle")))},V=function(e){var t=e.setTasks,a=e.setAllTasks,c=Object(n.useState)(""),s=Object(u.a)(c,2),l=s[0],i=s[1],o=Object(n.useState)(""),f=Object(u.a)(o,2),v=f[0],b=f[1],E=function(){var e=Object(p.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,M.getSearchedTasks({search:l});case 4:r=e.sent,t(r),a(r),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),b("Haku ei onnistunut"),setTimeout((function(){b(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"search"},r.a.createElement(d,{message:v,type:"error"}),r.a.createElement("form",{onSubmit:E,className:"search-form"},r.a.createElement("input",{className:"search-input",type:"text",defaultValue:"",name:"search",placeholder:"Hakutermi",onChange:function(e){var t=e.target;return i(t.value)}}),r.a.createElement("button",{type:"submit",className:"search-tasks-button"},"Hae")))},F=a(38),R=a.n(F),I=a(28),H=function(e){var t=e.allTasks,a=e.categories,c=e.rules,s=e.series,l=(e.tasks,e.setTasks),i=Object(n.useState)([]),o=Object(u.a)(i,2),m=o[0],p=o[1],d=Object(n.useState)([]),f=Object(u.a)(d,2),v=f[0],b=f[1],E=Object(n.useState)(""),g=Object(u.a)(E,2),h=g[0],k=g[1];Object(n.useEffect)((function(){if(v.length>0&&m.length>0&&h){for(var e=[],a=0;a<t.length;a++)for(var n=0;n<t[a].series.length;n++)v.includes(t[a].series[n].id)&&m.includes(t[a].category.id)&&t[a].rules.id===h.id&&!e.includes(t[a])&&e.push(t[a]);l(e)}else if(v.length>0&&m.length>0){for(var r=[],c=0;c<t.length;c++)for(var s=0;s<t[c].series.length;s++)v.includes(t[c].series[s].id)&&m.includes(t[c].category.id)&&!r.includes(t[c])&&r.push(t[c]);l(r)}else if(v.length>0&&h){for(var u=[],i=0;i<t.length;i++)for(var o=0;o<t[i].series.length;o++)v.includes(t[i].series[o].id)&&t[i].rules.id===h.id&&!u.includes(t[i])&&u.push(t[i]);l(u)}else if(m.length>0&&h)l(t.filter((function(e){return m.includes(e.category.id)&&e.rules.id===h.id})));else if(v.length>0){for(var p=[],d=0;d<t.length;d++)for(var f=0;f<t[d].series.length;f++)v.includes(t[d].series[f].id)&&!p.includes(t[d])&&p.push(t[d]);l(p)}else m.length>0?l(t.filter((function(e){return m.includes(e.category.id)}))):l(h?t.filter((function(e){return e.rules.id===h.id})):t)}),[m,v,h]);return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"filter"},r.a.createElement(I.a,{name:"filter-series",getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e.id)},onChange:function(e){e&&e.length>0?b(e.map((function(e){return e.id}))):(b([]),l(t))},options:s,isClearable:!0,placeholder:"Sarja",isMulti:!0})),r.a.createElement("div",{className:"filter"},r.a.createElement(I.a,{name:"filter-category",getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e.id)},onChange:function(e){e&&e.length>0?p(e.map((function(e){return e.id}))):(p([]),l(t))},options:a,isClearable:!0,placeholder:"Kategoria",isMulti:!0})),r.a.createElement("div",{className:"filter"},r.a.createElement(I.a,{name:"filter-rules",getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e.id)},onChange:function(e){e?k(e):(k(""),l(t))},options:c,isClearable:!0,placeholder:"S\xe4\xe4nn\xf6t"})))},z=a(51),B=a.n(z),G=function(e){var t=e.user,a=e.originalTasks,c=e.categories,s=e.rules,i=e.seriess,o=e.addTaskToBasket,f=e.handleUpdateTask,v=e.handleDeleteTask,b=Object(n.useState)(a),E=Object(u.a)(b,2),g=E[0],h=E[1],k=Object(n.useState)(a),j=Object(u.a)(k,2),y=j[0],N=j[1],S=Object(n.useState)(null),w=Object(u.a)(S,2),x=w[0],C=w[1],T=Object(n.useState)(!1),D=Object(u.a)(T,2),L=D[0],A=D[1],U=Object(n.useState)(!1),P=Object(u.a)(U,2),K=P[0],J=P[1],F=Object(n.useState)(!1),I=Object(u.a)(F,2),z=I[0],G=I[1];Object(n.useEffect)((function(){h(a),N(a)}),[a]);var _=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateViews(t.id);case 3:f(Object(O.a)({},t,{views:t.views+1})),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!window.confirm("Haluatko poistaa teht\xe4v\xe4n: ".concat(a.name))){e.next=6;break}return e.next=5,M.deleteTask(a.id);case 5:v(a.id);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),C("Jotain meni vikaan"),setTimeout((function(){C(null)}),5e3);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),q=function(e,t){return e.name.localeCompare(t.name)},Q=function(e,t){return t.name.localeCompare(e.name)},W=function(e,t){return e.ratingsAVG-t.ratingsAVG},X=function(e,t){return t.ratingsAVG-e.ratingsAVG},Z=function(e,t){return e.created.localeCompare(t.created)},$=function(e,t){return t.created.localeCompare(e.created)};return r.a.createElement("div",{className:"task-list"},r.a.createElement("h1",null,"Kisateht\xe4v\xe4pankki"),r.a.createElement("div",{className:"search-filter-container"},r.a.createElement(V,{setTasks:h,setAllTasks:N}),r.a.createElement(H,{tasks:g,allTasks:y,categories:c,rules:s,series:i,setTasks:h})),r.a.createElement(d,{message:x}),g&&g.length>0&&r.a.createElement("div",{className:"task-list-title"},r.a.createElement("span",{className:"arrow-inline"},r.a.createElement("div",{onClick:function(){h(L?g.sort(Q).concat([]):g.sort(q).concat([])),A(!L)}},"Teht\xe4v\xe4n nimi"),r.a.createElement("div",{className:"arrow-container"},r.a.createElement("i",{className:"name-arrow-up",onClick:function(){h(g.sort(Q).concat([]))}}),r.a.createElement("i",{className:"name-arrow-down",onClick:function(){h(g.sort(q).concat([]))}}))),r.a.createElement("span",null,"Sarja"),r.a.createElement("span",null,"Kategoria"),r.a.createElement("span",{className:"arrow-inline"},r.a.createElement("div",{onClick:function(){h(K?g.sort(W).concat([]):g.sort(X).concat([])),J(!K)}},"Arvostelu"),r.a.createElement("div",{className:"arrow-container"},r.a.createElement("i",{className:"rating-arrow-up",onClick:function(){h(g.sort(W).concat([]))}}),r.a.createElement("i",{className:"rating-arrow-down",onClick:function(){h(g.sort(X).concat([]))}}))),r.a.createElement("span",{className:"arrow-inline"},r.a.createElement("div",{onClick:function(){h(z?g.sort(Z).concat([]):g.sort($).concat([])),G(!z)}},"Lis\xe4tty"),r.a.createElement("div",{className:"arrow-container"},r.a.createElement("i",{className:"created-arrow-up",onClick:function(){h(g.sort(Z).concat([]))}}),r.a.createElement("i",{className:"created-arrow-down",onClick:function(){h(g.sort($).concat([]))}}))),t&&r.a.createElement("span",null),r.a.createElement("span",null)),g.map((function(e){return r.a.createElement(l.b,{className:"no-underline",to:"/tehtava/".concat(e.id),onClick:function(){return _(e)},key:e.id},r.a.createElement("div",{className:"task-list-item"},r.a.createElement("div",{className:"black-basket-mobile",title:"Lis\xe4\xe4 koriin",onClick:function(t){return o(t,e)}}),r.a.createElement("span",{className:"span-bigger"},r.a.createElement("p",{className:"bigger-task-name"},e.name),r.a.createElement("p",null,"Katselukertoja: ",e.views)),r.a.createElement("span",null,e.series.map((function(t){return r.a.createElement("div",{key:e.id+t.id},t.name," ")}))),r.a.createElement("span",null,e.category&&e.category.name),r.a.createElement("span",null,r.a.createElement(R.a,{rating:e.ratingsAVG,starRatedColor:"#f0e105",starDimension:"20px",starSpacing:"10px"})),e.created&&r.a.createElement("span",null,r.a.createElement(B.a,{format:"DD.MM.YYYY HH:mm"},e.created)),t&&r.a.createElement("span",{className:"task-list-delete"},r.a.createElement("button",{className:"delete-button",onClick:function(t){return Y(t,e)}},"Poista")),r.a.createElement("span",null,r.a.createElement("div",{className:"black-basket",title:"Lis\xe4\xe4 koriin",onClick:function(t){return o(t,e)}}))))})))},_=a(30),Y=function(e){var t=e.name,a=e.date,n=e.place,c=e.type,s=e.logo,l=e.setName,u=e.setDate,i=e.setPlace,o=e.setType,m=e.setLogo;return r.a.createElement("div",null,r.a.createElement("h2",{className:"basket-title"},"Kisan tiedot"),r.a.createElement("div",{className:"competition-container"},r.a.createElement("div",{className:"competition"},r.a.createElement("div",null,r.a.createElement("input",{className:"competition-name",type:"text",value:t,name:"Name",placeholder:"Kisan nimi",onChange:function(e){var t=e.target;return l(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"competition-date",type:"text",value:a,name:"Name",placeholder:"Kisan p\xe4iv\xe4m\xe4\xe4r\xe4",onChange:function(e){var t=e.target;return u(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"competition-place",type:"text",value:n,name:"Name",placeholder:"Kisapaikka",onChange:function(e){var t=e.target;return i(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"competition-type",type:"text",value:c,name:"Name",placeholder:"Kisan laji",onChange:function(e){var t=e.target;return o(t.value)}}))),r.a.createElement("div",{className:"competition-dropzone"},r.a.createElement(_.a,{onDrop:function(e){m(e[0])}},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement("div",{className:"files competition-files"},r.a.createElement("div",{className:"title"},"Logo"),s&&r.a.createElement("div",{key:s.name},s.name,r.a.createElement("span",{onClick:function(e){return function(e){e.stopPropagation(),m(null)}(e)},className:"remove-file"}))))})))))},q=function(e){var t=e.tasks,a=e.removeTaskFromBasket,c=e.handleUpdateTask,s=e.removeAllFromBasket,i=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateViews(t.id);case 3:c(Object(O.a)({},t,{views:t.views+1})),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),o=Object(n.useState)(""),f=Object(u.a)(o,2),v=f[0],b=f[1],E=Object(n.useState)(""),g=Object(u.a)(E,2),h=g[0],k=g[1],j=Object(n.useState)(""),y=Object(u.a)(j,2),N=y[0],S=y[1],w=Object(n.useState)(""),x=Object(u.a)(w,2),C=x[0],T=x[1],D=Object(n.useState)(null),L=Object(u.a)(D,2),A=L[0],U=L[1],P=Object(n.useState)(""),K=Object(u.a)(P,2),J=K[0],V=K[1],F=Object(n.useState)(!1),R=Object(u.a)(F,2),I=R[0],H=R[1],z=function(){var e=Object(p.a)(m.a.mark((function e(a){var n,r,c,s,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),n=new FormData,r=JSON.stringify({name:v,date:h,place:N,type:C,tasks:t.map((function(e){return e.id}))}),n.append("competition",r),A&&n.append("logo",A,A.name),e.prev=5,e.next=8,M.makePDFs(n);case 8:c=e.sent,b(""),k(""),S(""),T(""),U(null),s=window.URL.createObjectURL(new Blob([c],{type:"application/zip"})),(l=document.createElement("a")).href=s,l.setAttribute("download","Rastit.zip"),document.body.appendChild(l),l.click(),H(!1),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(5),V("Jotain meni vikaan"),setTimeout((function(){V(null)}),5e3);case 27:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"task-list"},r.a.createElement(d,{message:J,type:"error"}),t&&t.length>0&&r.a.createElement(Y,{name:v,date:h,place:N,type:C,logo:A,setName:b,setDate:k,setPlace:S,setType:T,setLogo:U}),r.a.createElement("h2",{className:"basket-title"},"Kisaan valitut teht\xe4v\xe4t"),t&&t.length>0&&r.a.createElement("button",{className:"basket-delete-all",onClick:s},"Poista kaikki"),t&&0===t.length&&r.a.createElement("div",{className:"empty-basket"},"Ei valittuja teht\xe4vi\xe4"),t&&t.length>0&&r.a.createElement("div",{className:"task-list-title"},r.a.createElement("span",null,"Teht\xe4v\xe4n nimi"),r.a.createElement("span",null,"Sarja"),r.a.createElement("span",null,"Kategoria"),r.a.createElement("span",null,"Liitetiedostot"),r.a.createElement("span",null)),t.map((function(e){return r.a.createElement("div",{className:"task-list-item",key:e.id},r.a.createElement("div",{className:"delete-task-from-basket-mobile",onClick:function(){return a(e.id)}}),r.a.createElement("span",null,r.a.createElement(l.b,{to:"/tehtava/".concat(e.id),onClick:function(){return i(e)}},e.name),r.a.createElement("p",null,"Katselukertoja: ",e.views)),r.a.createElement("span",null,e.series.map((function(t){return r.a.createElement("div",{key:e.id+t.id},t.name," ")}))),r.a.createElement("span",null,e.category&&e.category.name),r.a.createElement("span",null,e.files&&e.files.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("a",{href:"https://kisapankki.blob.core.windows.net/files/".concat(e)},e.substring(e.indexOf("-")+1,e.length)))}))),r.a.createElement("span",{className:"delete-task-from-basket",onClick:function(){return a(e.id)}}))})),t&&t.length>0&&r.a.createElement("div",{className:"make-pdfs"},I?r.a.createElement("div",{className:"loader in-basket"}):r.a.createElement("button",{onClick:z},"Tee PDF-tiedostot")))},Q="".concat("/api","/user"),W=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(Q);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X={addUser:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.post(Q,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUsers:W,editUser:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.put(Q,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Z=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),l=Object(u.a)(s,2),i=l[0],o=l[1],f=Object(n.useState)(null),v=Object(u.a)(f,2),b=v[0],E=v[1],g=Object(n.useState)(null),h=Object(u.a)(g,2),k=h[0],j=h[1],O=Object(n.useState)(null),y=Object(u.a)(O,2),N=y[0],S=y[1],w=Object(n.useState)(null),x=Object(u.a)(w,2),C=x[0],T=x[1],D=Object(n.useState)(""),L=Object(u.a)(D,2),A=L[0],U=L[1],P=Object(n.useState)(""),K=Object(u.a)(P,2),M=K[0],J=K[1],V=Object(n.useState)(""),F=Object(u.a)(V,2),R=F[0],I=F[1],H=Object(n.useState)([]),z=Object(u.a)(H,2),B=z[0],G=z[1],_=Object(n.useState)(""),Y=Object(u.a)(_,2),q=Y[0],Q=Y[1],W=Object(n.useState)(!0),Z=Object(u.a)(W,2),$=Z[0],ee=Z[1];Object(n.useEffect)((function(){X.getUsers().then((function(e){G(e)}))}),[]);var te=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E(null),j(null),S(null),T(null),A.length<3&&E("Nimess\xe4 pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),M.length<3&&j("K\xe4ytt\xe4j\xe4tunnuksessa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),R.length<3&&S("Salasanassa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),B.some((function(e){return e.username===M}))&&j("K\xe4ytt\xe4j\xe4tunnus on varattu"),!(A.length<3||M.length<3||R.length<3||B.some((function(e){return e.username===M})))){e.next=11;break}return e.abrupt("return");case 11:return e.prev=11,e.next=14,X.addUser({name:A,username:M,email:q,password:R,allowNotifications:$});case 14:U(""),J(""),Q(""),I(""),ee(!0),c("Yll\xe4pit\xe4j\xe4 lis\xe4tty!"),setTimeout((function(){c(null)}),5e3),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(11),o("Lis\xe4\xe4minen ep\xe4onnistui"),setTimeout((function(){o(null)}),5e3);case 27:case"end":return e.stop()}}),e,null,[[11,23]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"signup-form"},r.a.createElement("h2",null,"Lis\xe4\xe4 yll\xe4pit\xe4j\xe4"),r.a.createElement(d,{message:a,type:"success"}),r.a.createElement(d,{message:i,type:"error"}),r.a.createElement("form",{onSubmit:te},r.a.createElement("div",{className:"Testi"},r.a.createElement(d,{message:b,type:"error"}),r.a.createElement("input",{className:"name",type:"text",value:A,name:"Name",placeholder:"Nimi",onChange:function(e){var t=e.target;return U(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:k,type:"error"}),r.a.createElement("input",{className:"username",type:"text",value:M,name:"Username",placeholder:"K\xe4ytt\xe4j\xe4tunnus",onChange:function(e){var t=e.target;return J(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:C,type:"error"}),r.a.createElement("input",{className:"email",type:"email",value:q,name:"email",placeholder:"S\xe4hk\xf6postiosoite",onChange:function(e){var t=e.target;return Q(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:N,type:"error"}),r.a.createElement("input",{className:"password",type:"password",value:R,name:"Password",placeholder:"Salasana",onChange:function(e){var t=e.target;return I(t.value)}})),r.a.createElement("div",null,r.a.createElement("label",null,"Vastaanota ilmoituksia:",r.a.createElement("div",{className:"admin-radio",onChange:function(e){var t=e.target;return ee(t.value)}},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"notifications",value:!0,defaultChecked:!0}),"Kyll\xe4"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"notifications",value:!1}),"Ei")))),r.a.createElement("button",{type:"submit",className:"signup-button"},"Lis\xe4\xe4")))},$="".concat("/api","/rule"),ee=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get($);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te={addRule:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.post($,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getRules:ee,editRule:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.put("".concat($,"/").concat(t.id),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteRule:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.delete("".concat($,"/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ae=function(e){var t=e.rules,a=e.setRules,c=e.categories,s=Object(n.useState)(""),l=Object(u.a)(s,2),i=l[0],o=l[1],f=Object(n.useState)(""),v=Object(u.a)(f,2),b=v[0],E=v[1],g=Object(n.useState)(""),h=Object(u.a)(g,2),k=h[0],j=h[1],y=Object(n.useState)(null),N=Object(u.a)(y,2),S=N[0],w=N[1],x=Object(n.useState)(!1),C=Object(u.a)(x,2),T=C[0],D=C[1],L=Object(n.useState)([]),A=Object(u.a)(L,2),U=A[0],P=A[1],K=Object(n.useState)([]),M=Object(u.a)(K,2),J=M[0],V=M[1],F=Object(n.useState)(!0),R=Object(u.a)(F,2),H=R[0],z=(R[1],function(){var e=Object(p.a)(m.a.mark((function e(n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=U,e.prev=2,e.next=5,te.addRule({rules:i,acceptedCategories:U.map((function(e){return e.id}))});case 5:c=e.sent,o(""),P([]),a(t.concat(Object(O.a)({},c,{acceptedCategories:r}))),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),w("Jotain meni vikaan"),setTimeout((function(){w(null)}),5e3);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()),B=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("Haluatko poistaa s\xe4\xe4nn\xf6n: ".concat(n.name))){e.next=5;break}return e.next=4,te.deleteRule(n.id);case 4:a(t.filter((function(e){return e.id!==n.id})));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),w("Jotain meni vikaan"),setTimeout((function(){w(null)}),5e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={id:k,name:b,acceptedCategories:J},e.prev=2,e.next=5,te.editRule({id:k,name:b,acceptedCategories:J.map((function(e){return e.id}))});case 5:D(!1),a(t.map((function(e){return e.id!==r.id?e:r}))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),w("Jotain meni vikaan"),setTimeout((function(){w(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),_=function(e){V(e)};return r.a.createElement("div",{className:"rule-form"},r.a.createElement(d,{message:S,type:"error"}),t&&t.map((function(e){return r.a.createElement("div",{className:"rule-list-item",key:e.id},T&&k===e.id?r.a.createElement("div",{className:"rule-form-item"},r.a.createElement("form",{onSubmit:G},r.a.createElement("div",{className:"item-modify"},r.a.createElement("input",{className:"rule",type:"text",value:b,name:"Category",onChange:function(e){var t=e.target;return E(t.value)}}),r.a.createElement("div",{className:"item-buttons-save"},r.a.createElement("button",{type:"submit",className:"rule-save-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return D(!1)}},"Peruuta"))),r.a.createElement("div",{className:"modify-acceptedCategories"},r.a.createElement(I.a,{name:"accepted-categories",value:J,getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e.id)},onChange:_,options:c,isClearable:H,placeholder:"S\xe4\xe4nn\xf6n kategoriat",isMulti:!0})))):r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"item-name"},e.name),r.a.createElement("div",{className:"item-buttons"},r.a.createElement("button",{onClick:function(){return function(e){D(!0),j(e.id),E(e.name),V(e.acceptedCategories)}(e)},className:"modify-button"},"Muokkaa"),r.a.createElement("button",{onClick:function(){return B(e)},className:"delete-button"},"Poista")),r.a.createElement("div",{className:"break"}),r.a.createElement("div",{className:"accepted-categories-list"},e.acceptedCategories&&e.acceptedCategories.map((function(e){return r.a.createElement("span",{key:e.id},e.name," ")})))))})),r.a.createElement("form",{onSubmit:z,className:"add-form"},r.a.createElement("div",{className:"item-add"},r.a.createElement("input",{className:"rule",type:"text",value:i,name:"Rules",placeholder:"Uusi s\xe4\xe4nt\xf6",onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement("button",{type:"submit",className:"rule-add-button"},"Lis\xe4\xe4")),r.a.createElement("div",{className:"add-acceptedCategories"},r.a.createElement(I.a,{name:"accepted-categories",value:U,getOptionLabel:function(e){return"".concat(e.name)},getOptionValue:function(e){return"".concat(e.id)},onChange:function(e){P(e)},options:c,isClearable:H,placeholder:"Uuden s\xe4\xe4nn\xf6n kategoriat",isMulti:!0}))))},ne="".concat("/api","/language"),re=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(ne);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.post(ne,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.put("".concat(ne,"/").concat(t.id),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le={addLanguage:ce,getLanguages:re,deleteLanguage:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.delete("".concat(ne,"/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editLanguage:se},ue=function(e){var t=e.languages,a=e.setLanguages,c=Object(n.useState)(""),s=Object(u.a)(c,2),l=s[0],i=s[1],o=Object(n.useState)(""),f=Object(u.a)(o,2),v=f[0],b=f[1],E=Object(n.useState)(""),g=Object(u.a)(E,2),h=g[0],k=g[1],j=Object(n.useState)(null),O=Object(u.a)(j,2),y=O[0],N=O[1],S=Object(n.useState)(!1),w=Object(u.a)(S,2),x=w[0],C=w[1],T=function(){var e=Object(p.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,le.addLanguage({language:l});case 4:r=e.sent,i(""),a(t.concat(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),N("Kielen lis\xe4\xe4minen ei onnistunut"),setTimeout((function(){N(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("Haluatko poistaa kielen: ".concat(n.name))){e.next=5;break}return e.next=4,le.deleteLanguage(n.id);case 4:a(t.filter((function(e){return e.id!==n.id})));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),N("Jotain meni vikaan"),setTimeout((function(){N(null)}),5e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={id:h,name:v},e.prev=2,e.next=5,le.editLanguage(r);case 5:C(!1),a(t.map((function(e){return e.id!==r.id?e:r}))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),N("Jotain meni vikaan"),setTimeout((function(){N(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"language-form"},r.a.createElement(d,{message:y,type:"error"}),t&&t.map((function(e){return r.a.createElement("div",{className:"language-list-item",key:e.id},x&&h===e.id?r.a.createElement("div",{className:"language-form-item"},r.a.createElement("form",{onSubmit:L},r.a.createElement("div",{className:"item-modify"},r.a.createElement("input",{className:"language",type:"text",value:v,name:"Language",onChange:function(e){var t=e.target;return b(t.value)}}),r.a.createElement("div",{className:"item-buttons-save"},r.a.createElement("button",{type:"submit",className:"language-save-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return C(!1)}},"Peruuta"))))):r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"item-name"},e.name),r.a.createElement("div",{className:"item-buttons"},r.a.createElement("button",{onClick:function(){return function(e){C(!0),k(e.id),b(e.name)}(e)},className:"modify-button"},"Muokkaa"),r.a.createElement("button",{onClick:function(){return D(e)},className:"delete-button"},"Poista"))))})),r.a.createElement("form",{onSubmit:T,className:"add-form"},r.a.createElement("div",{className:"item-add"},r.a.createElement("input",{className:"language",type:"text",value:l,name:"Language",placeholder:"Uusi kieli",onChange:function(e){var t=e.target;return i(t.value)}}),r.a.createElement("button",{type:"submit",className:"language-add-button"},"Lis\xe4\xe4"))))},ie=a(76),oe="".concat("/api","/series"),me=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(oe);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.post(oe,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.put("".concat(oe,"/").concat(t.id),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe={addSeries:pe,getSeries:me,deleteSerie:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.delete("".concat(oe,"/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editSerie:de},ve=function(e){var t=e.series,a=e.setSeries,c=Object(n.useState)(""),s=Object(u.a)(c,2),l=s[0],i=s[1],o=Object(n.useState)(""),f=Object(u.a)(o,2),v=f[0],b=f[1],E=Object(n.useState)(""),g=Object(u.a)(E,2),h=g[0],k=g[1],j=Object(n.useState)(""),O=Object(u.a)(j,2),y=O[0],N=O[1],S=Object(n.useState)("#ffffff"),w=Object(u.a)(S,2),x=w[0],C=w[1],T=Object(n.useState)(null),D=Object(u.a)(T,2),L=D[0],A=D[1],U=Object(n.useState)(!1),P=Object(u.a)(U,2),K=P[0],M=P[1],J=function(){var e=Object(p.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,fe.addSeries({name:l,color:x});case 4:r=e.sent,i(""),C(""),a(t.concat(r)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),A("Jotain meni vikaan"),setTimeout((function(){A(null)}),5e3);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("Haluatko poistaa sarjan: ".concat(n.name))){e.next=5;break}return e.next=4,fe.deleteSerie(n.id);case 4:a(t.filter((function(e){return e.id!==n.id})));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),A("Jotain meni vikaan"),setTimeout((function(){A(null)}),5e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(p.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={id:h,name:v,color:y},e.prev=2,e.next=5,fe.editSerie(r);case 5:M(!1),a(t.map((function(e){return e.id!==r.id?e:r}))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),A("Jotain meni vikaan"),setTimeout((function(){A(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"series-form"},r.a.createElement(d,{message:L,type:"error"}),t&&t.map((function(e){return r.a.createElement("div",{className:"serie-list-item",key:e.id},K&&h===e.id?r.a.createElement("div",{className:"serie-form-item"},r.a.createElement("form",{onSubmit:F},r.a.createElement("div",{className:"item-modify"},r.a.createElement("input",{className:"serie",type:"text",value:v,name:"Serie",onChange:function(e){var t=e.target;return b(t.value)}}),r.a.createElement("div",{className:"item-buttons-save"},r.a.createElement("button",{type:"submit",className:"serie-save-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return M(!1)}},"Peruuta")),r.a.createElement("div",{className:"color-picker"},r.a.createElement(ie.CirclePicker,{color:y,onChangeComplete:function(e){return N(e.hex)},colors:["#253764","#28aae1","#f04150","#f0a01e","#f0e105","#14a54b","#f5ea2e","#d4791e","#5e0f75","#33652e","#6e470a","#607d8b"]}))))):r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"item-name"},r.a.createElement("span",null,e.name),r.a.createElement("span",{style:{backgroundColor:e.color,display:"inline-block",borderRadius:"50%",height:"27px",width:"27px",marginLeft:"5px"}})),r.a.createElement("div",{className:"item-buttons"},r.a.createElement("button",{onClick:function(){return function(e){M(!0),k(e.id),b(e.name),N(e.color)}(e)},className:"modify-button"},"Muokkaa"),r.a.createElement("button",{onClick:function(){return V(e)},className:"delete-button"},"Poista"))))})),r.a.createElement("form",{onSubmit:J,className:"add-form"},r.a.createElement("div",{className:"item-add"},r.a.createElement("input",{className:"name",type:"text",value:l,name:"Name",placeholder:"Uusi sarja",onChange:function(e){var t=e.target;return i(t.value)}}),r.a.createElement("button",{type:"submit",className:"series-submit-button"},"Lis\xe4\xe4")),r.a.createElement("div",{className:"color-picker"},r.a.createElement(ie.CirclePicker,{color:x,onChangeComplete:function(e){return C(e.hex)},colors:["#253764","#28aae1","#f04150","#f0a01e","#f0e105","#14a54b","#f5ea2e","#d4791e","#5e0f75","#33652e","#6e470a","#607d8b"]}))))},be="".concat("/api","/category"),Ee=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(be);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge={addCategory:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.post(be,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCategories:Ee,editCategory:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a={headers:{Authorization:h()}},e.next=4,v.a.put("".concat(be,"/").concat(t.id),t,a);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteCategory:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h()}},e.next=3,v.a.delete("".concat(be,"/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},he=function(e){var t=e.categories,a=e.setCategories,c=Object(n.useState)(""),s=Object(u.a)(c,2),l=s[0],i=s[1],o=Object(n.useState)(""),f=Object(u.a)(o,2),v=f[0],b=f[1],E=Object(n.useState)(""),g=Object(u.a)(E,2),h=g[0],k=g[1],j=Object(n.useState)(null),O=Object(u.a)(j,2),y=O[0],N=O[1],S=Object(n.useState)(!1),w=Object(u.a)(S,2),x=w[0],C=w[1],T=function(){var e=Object(p.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,ge.addCategory({category:l});case 4:r=e.sent,i(""),a(t.concat(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),N("Jotain meni vikaan"),setTimeout((function(){N(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("Haluatko poistaa kategorian: ".concat(n.name))){e.next=5;break}return e.next=4,ge.deleteCategory(n.id);case 4:a(t.filter((function(e){return e.id!==n.id})));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),N("Jotain meni vikaan"),setTimeout((function(){N(null)}),5e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={id:h,name:v},e.prev=2,e.next=5,ge.editCategory(r);case 5:C(!1),a(t.map((function(e){return e.id!==r.id?e:r}))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),N("Jotain meni vikaan"),setTimeout((function(){N(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"category-form"},r.a.createElement(d,{message:y,type:"error"}),t&&t.map((function(e){return r.a.createElement("div",{className:"category-list-item",key:e.id},x&&h===e.id?r.a.createElement("div",{className:"category-form-item"},r.a.createElement("form",{onSubmit:L},r.a.createElement("div",{className:"item-modify"},r.a.createElement("input",{className:"category",type:"text",value:v,name:"Category",onChange:function(e){var t=e.target;return b(t.value)}}),r.a.createElement("div",{className:"item-buttons-save"},r.a.createElement("button",{type:"submit",className:"category-save-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return C(!1)}},"Peruuta"))))):r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"item-name"},e.name),r.a.createElement("div",{className:"item-buttons"},r.a.createElement("button",{onClick:function(){return function(e){C(!0),k(e.id),b(e.name)}(e)},className:"modify-button"},"Muokkaa"),r.a.createElement("button",{onClick:function(){return D(e)},className:"delete-button"},"Poista"))))})),r.a.createElement("form",{onSubmit:T,className:"add-form"},r.a.createElement("div",{className:"item-add"},r.a.createElement("input",{className:"category",type:"text",value:l,name:"Category",placeholder:"Uusi kategoria",onChange:function(e){var t=e.target;return i(t.value)}}),r.a.createElement("button",{type:"submit",className:"category-add-button"},"Lis\xe4\xe4"))))},ke=function(e){var t=e.rules,a=e.categories,c=e.languages,s=e.series,l=e.setRules,i=e.setCategories,o=e.setLanguages,m=e.setSeries,p=Object(n.useState)(!1),d=Object(u.a)(p,2),f=d[0],v=d[1],b=Object(n.useState)(!1),E=Object(u.a)(b,2),g=E[0],h=E[1],k=Object(n.useState)(!1),j=Object(u.a)(k,2),O=j[0],y=j[1],N=Object(n.useState)(!1),S=Object(u.a)(N,2),w=S[0],x=S[1];return r.a.createElement("div",{className:"crls-container"},r.a.createElement("div",{className:"task-types-menu"},w?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"task-types",onClick:function(){return x(!w)}},"Sulje sarjat"),r.a.createElement(ve,{series:s,setSeries:m})):r.a.createElement("button",{className:"task-types",onClick:function(){return x(!w)}},"Sarjat")),r.a.createElement("div",{className:"task-types-menu"},g?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"task-types",onClick:function(){return h(!g)}},"Sulje s\xe4\xe4nn\xf6t"),r.a.createElement(ae,{rules:t,setRules:l,categories:a})):r.a.createElement("button",{className:"task-types",onClick:function(){return h(!g)}},"S\xe4\xe4nn\xf6t")),r.a.createElement("div",{className:"task-types-menu"},f?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"task-types",onClick:function(){return v(!f)}},"Sulje kategoriat"),r.a.createElement(he,{categories:a,setCategories:i})):r.a.createElement("button",{className:"task-types",onClick:function(){return v(!f)}},"Kategoriat")),r.a.createElement("div",{className:"task-types-menu"},O?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"task-types",onClick:function(){return y(!O)}},"Sulje kielet"),r.a.createElement(ue,{languages:c,setLanguages:o})):r.a.createElement("button",{className:"task-types",onClick:function(){return y(!O)}},"Kielet")))},je="".concat("/api","/file"),Oe={updateFiles:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"multipart/form-data"}},e.next=3,v.a.post(je,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ye=a(135),Ne=a.n(ye),Se=a(136),we=a.n(Se),xe=(a(388),function(e){var t=e.setText,a=e.setMD,n=e.value,c=new Ne.a;return r.a.createElement(we.a,{value:n,renderHTML:function(e){return c.render(e)},onChange:function(e){var n=e.html,r=e.text;t(n),a(r)}})}),Ce=function(e){var t=e.rules,a=e.seriess,c=e.languages,s=Object(n.useState)(""),l=Object(u.a)(s,2),i=l[0],o=l[1],f=Object(n.useState)(""),v=Object(u.a)(f,2),b=v[0],E=v[1],g=Object(n.useState)(""),h=Object(u.a)(g,2),k=h[0],j=h[1],O=Object(n.useState)(""),y=Object(u.a)(O,2),N=y[0],S=y[1],w=Object(n.useState)(""),x=Object(u.a)(w,2),C=x[0],T=x[1],D=Object(n.useState)(""),L=Object(u.a)(D,2),A=L[0],U=L[1],P=Object(n.useState)(""),K=Object(u.a)(P,2),J=K[0],V=K[1],F=Object(n.useState)(""),R=Object(u.a)(F,2),I=R[0],H=R[1],z=Object(n.useState)(""),B=Object(u.a)(z,2),G=B[0],Y=B[1],q=Object(n.useState)(""),Q=Object(u.a)(q,2),W=Q[0],X=Q[1],Z=Object(n.useState)([]),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(""),ne=Object(u.a)(ae,2),re=ne[0],ce=ne[1],se=Object(n.useState)([]),le=Object(u.a)(se,2),ue=le[0],ie=le[1],oe=Object(n.useState)(""),me=Object(u.a)(oe,2),pe=me[0],de=me[1],fe=Object(n.useState)(""),ve=Object(u.a)(fe,2),be=ve[0],Ee=ve[1],ge=Object(n.useState)(""),he=Object(u.a)(ge,2),ke=he[0],je=he[1],ye=Object(n.useState)(null),Ne=Object(u.a)(ye,2),Se=Ne[0],we=Ne[1],Ce=Object(n.useState)(null),Te=Object(u.a)(Ce,2),De=Te[0],Le=Te[1],Ae=Object(n.useState)(null),Ue=Object(u.a)(Ae,2),Pe=Ue[0],Ke=Ue[1],Me=Object(n.useState)(null),Je=Object(u.a)(Me,2),Ve=Je[0],Fe=Je[1],Re=Object(n.useState)(null),Ie=Object(u.a)(Re,2),He=Ie[0],ze=Ie[1],Be=Object(n.useState)([]),Ge=Object(u.a)(Be,2),_e=Ge[0],Ye=Ge[1],qe=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),we(null),Le(null),Ke(null),Fe(null),ze(null),k.length<1&&we("Nimi ei saa olla tyhj\xe4"),N.length<1&&Le("Teht\xe4v\xe4nanto ei saa olla tyhj\xe4"),be.length<1&&Ke("Lis\xe4\xe4j\xe4n nimi ei saa olla tyhj\xe4"),ke.length<1&&Fe("Lis\xe4\xe4j\xe4n s\xe4hk\xf6posti ei saa olla tyhj\xe4"),""!==pe&&""!==W&&""!==ue&&""!==re||ze("Valitsethan arvon kaikkiin pudotuskenttiin"),!(k.length<1||N.length<1||be.length<1||ke.length<1||""===pe||""===W||""===ue||""===re)){e.next=13;break}return e.abrupt("return");case 13:if(S(JSON.stringify(N)),T(JSON.stringify(C)),U(JSON.stringify(A)),a=new FormData,_e.length>0)for(n=0;n<_e.length;n++)a.append("filesToAdd",_e[n],_e[n].name);return r=[],e.prev=19,e.next=22,Oe.updateFiles(a);case 22:return r=e.sent,e.next=25,M.addtask({name:k,rule:W,category:re,series:ue,language:pe,assignmentText:N,gradingScale:C,creatorName:be,creatorEmail:ke,supervisorInstructions:A,assignmentTextMD:J,gradingScaleMD:I,supervisorInstructionsMD:G,files:r});case 25:j(""),X(""),ce(""),ie(""),de(""),S(""),T(""),je(""),Ee(""),U(""),o("Teht\xe4v\xe4 lis\xe4tty!"),setTimeout((function(){o(null),window.location.reload()}),2e3),e.next=43;break;case 39:e.prev=39,e.t0=e.catch(19),E("Jotain meni vikaan"),setTimeout((function(){E(null)}),5e3);case 43:case"end":return e.stop()}}),e,null,[[19,39]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"add-task-container"},r.a.createElement("h2",null,"Lis\xe4\xe4 teht\xe4v\xe4"),r.a.createElement(d,{message:i,type:"success"}),r.a.createElement(d,{message:b,type:"error"}),r.a.createElement("form",{onSubmit:qe},r.a.createElement("div",null,r.a.createElement(d,{message:Se,type:"error"}),r.a.createElement("input",{className:"task-title",type:"text",value:k,name:"Name",placeholder:"Teht\xe4v\xe4n nimi",onChange:function(e){var t=e.target;return j(t.value)}})),r.a.createElement("div",null,r.a.createElement("h4",null,"Teht\xe4v\xe4nanto"),r.a.createElement(d,{message:De,type:"error"}),r.a.createElement(xe,{setText:S,setMD:V})),r.a.createElement("div",null,r.a.createElement("h4",null,"Arvostelu"),r.a.createElement(xe,{setText:T,setMD:H})),r.a.createElement("div",{className:"instructions"},r.a.createElement("h4",null,"Rastimiehen ohje"),r.a.createElement(xe,{setText:U,setMD:Y})),r.a.createElement(d,{message:He,type:"error"}),r.a.createElement("div",{className:"dropdowns"},r.a.createElement("div",null,r.a.createElement("select",{multiple:!0,value:ue,onChange:function(e){return function(e){for(var t=e.target.options,a=[],n=0,r=t.length;n<r;n++)t[n].selected&&""!==t[n].value&&a.push(t[n].value);ie(a)}(e)},className:"multiple-series"},r.a.createElement("option",{value:"",className:"series-info"},"Sarja (paina Ctrl, jos useita)"),a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",null,r.a.createElement("select",{className:"rule-select",value:W,onChange:function(e){return function(e){if(X(e.target.value),ce(""),e.target.value){var a=t.find((function(t){return t.id===e.target.value}));te(a.acceptedCategories)}else te([])}(e)}},r.a.createElement("option",{value:""},"S\xe4\xe4nn\xf6t"),t.map((function(e){return r.a.createElement("option",{className:"rule-options",key:e.id,value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("select",{className:"category-select",value:re,onChange:function(e){return function(e){ce(e.target.value)}(e)}},r.a.createElement("option",{value:""},"Kategoria"),ee.map((function(e){return r.a.createElement("option",{className:"category-options",key:e.id,value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("select",{className:"language-select",value:pe,onChange:function(e){return function(e){de(e.target.value)}(e)}},r.a.createElement("option",{value:""},"Kieli"),c.map((function(e){return r.a.createElement("option",{className:"language-options",key:e.id,value:e.id},e.name)}))))),r.a.createElement("div",{className:"creator"},r.a.createElement("div",null,r.a.createElement(d,{message:Pe,type:"error"}),r.a.createElement("input",{className:"",type:"text",value:be,name:"CreatorName",placeholder:"Lis\xe4\xe4j\xe4n nimi",onChange:function(e){var t=e.target;return Ee(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:Ve,type:"error"}),r.a.createElement("input",{className:"",type:"text",value:ke,name:"CreatorEmail",placeholder:"Lis\xe4\xe4j\xe4n s\xe4hk\xf6posti",onChange:function(e){var t=e.target;return je(t.value)}}))),r.a.createElement(_.a,{onDrop:function(e){Ye(_e.concat(e))}},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement("div",{className:"files"},r.a.createElement("div",{className:"title"},"Liitetiedostot"),_e.length>0&&r.a.createElement(r.a.Fragment,null,_e.map((function(e){return r.a.createElement("div",{key:e.name},e.name,r.a.createElement("span",{onClick:function(t){return function(e,t){e.stopPropagation(),Ye(_e.filter((function(e){return e.name!==t})))}(t,e.name)},className:"remove-file"}))})))))})),r.a.createElement("button",{type:"submit",className:"add-task-button"},"Lis\xe4\xe4 teht\xe4v\xe4")))},Te=function(e){var t=e.handleAddTask,a=e.handleUpdateTask,c=e.handleDeleteTask,s=Object(n.useState)([]),i=Object(u.a)(s,2),o=i[0],f=i[1],v=Object(n.useState)(null),b=Object(u.a)(v,2),E=b[0],g=b[1],j=Object(n.useState)(null),y=Object(u.a)(j,2),N=y[0],S=y[1];Object(n.useEffect)((function(){if(!h()){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);k(t.token)}}M.getPendingTasks().then((function(e){f(e)}))}),[]);var w=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateViews(t.id);case 3:a(Object(O.a)({},t,{views:t.views+1})),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!window.confirm("Haluatko poistaa teht\xe4v\xe4n: ".concat(a.name))){e.next=6;break}return e.next=5,M.deleteTask(a.id);case 5:c(a.id);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),S("Jotain meni vikaan"),setTimeout((function(){S(null)}),5e3);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"task-list"},r.a.createElement("h1",null,"Hyv\xe4ksynt\xe4\xe4 odottavat kisateht\xe4v\xe4t"),r.a.createElement(d,{message:E,type:"success"}),r.a.createElement(d,{message:N,type:"error"}),o&&o.length>0&&r.a.createElement("div",{className:"task-list-title"},r.a.createElement("span",null,"Teht\xe4v\xe4n nimi"),r.a.createElement("span",null,"Sarja"),r.a.createElement("span",null,"Kategoria"),r.a.createElement("span",null),r.a.createElement("span",null)),o.map((function(e){return r.a.createElement(l.b,{className:"no-underline",to:"/tehtava/".concat(e.id),onClick:function(){return w(e)},key:e.id},r.a.createElement("div",{className:"task-list-item"},r.a.createElement("span",null,e.name,r.a.createElement("p",null,"Katselukertoja: ",e.views)),r.a.createElement("span",null,e.series.map((function(t){return r.a.createElement("div",{key:e.id+t.id},t.name," ")}))),r.a.createElement("span",null,e.category&&e.category.name),r.a.createElement("button",{className:"accept-button",onClick:function(a){return function(e,a){e.preventDefault();try{M.acceptTask(a.id),f(o.filter((function(e){return e.id!==a.id}))),t(a),g("Teht\xe4v\xe4 hyv\xe4ksytty"),setTimeout((function(){g(null)}),5e3)}catch(n){S("Jotain meni vikaan"),setTimeout((function(){S(null)}),5e3)}}(a,e)}},"Hyv\xe4ksy"),r.a.createElement("button",{className:"delete-button",onClick:function(t){return x(t,e)}},"Poista")))})))},De=function(e){var t=e.handleAddTask,a=e.handleUpdateTask,n=e.handleDeleteTask;return r.a.createElement("div",null,r.a.createElement(Te,{handleAddTask:t,handleUpdateTask:a,handleDeleteTask:n}),r.a.createElement(l.b,{className:"no-underline",to:"/omasivu"},"Omat tiedot"),r.a.createElement("br",null),r.a.createElement(l.b,{className:"no-underline",to:"/lisaa_admin"},"Lis\xe4\xe4 yll\xe4pit\xe4j\xe4"),r.a.createElement("br",null),r.a.createElement(l.b,{className:"no-underline",to:"/lisaa_pudotusvalikkoon"},"Hallinnoi s\xe4\xe4nt\xf6j\xe4/kieli\xe4/sarjoja/kategorioita"))},Le=function(e){var t=e.setShowEdit,a=e.user,c=e.setUser,s=e.setMessage,l=Object(n.useState)(null),i=Object(u.a)(l,2),o=i[0],f=i[1],v=Object(n.useState)(null),b=Object(u.a)(v,2),E=b[0],g=b[1],h=Object(n.useState)(null),k=Object(u.a)(h,2),j=k[0],O=k[1],y=Object(n.useState)(null),N=Object(u.a)(y,2),S=N[0],w=N[1],x=Object(n.useState)(a.name),C=Object(u.a)(x,2),T=C[0],D=C[1],L=Object(n.useState)(a.username),A=Object(u.a)(L,2),U=A[0],P=A[1],K=Object(n.useState)(a.email),M=Object(u.a)(K,2),J=M[0],V=M[1],F=Object(n.useState)(a.allowNotifications),R=Object(u.a)(F,2),I=R[0],H=R[1],z=function(){var e=Object(p.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),g(null),O(null),w(null),T.length<3&&g("Nimess\xe4 pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),U.length<3&&O("K\xe4ytt\xe4j\xe4tunnuksessa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),J.length<5&&w("S\xe4hk\xf6postissa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 5 kirjainta"),!(T.length<3||U.length<3)){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,e.next=12,X.editUser({name:T,username:U,email:J,allowNotifications:I});case 12:n=e.sent,c(n),window.localStorage.setItem("loggedUser",JSON.stringify(n)),t(!1),s("Tietoja muokattu!"),setTimeout((function(){s(null)}),5e3),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(9),e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&"username already exists"===e.t0.response.data.error?f("K\xe4ytt\xe4j\xe4tunnus on varattu"):f("Muokkaaminen ep\xe4onnistui"),setTimeout((function(){f(null)}),5e3);case 24:case"end":return e.stop()}}),e,null,[[9,20]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"edit-user-form"},r.a.createElement("h2",null,"Omat tiedot"),r.a.createElement(d,{message:o,type:"error"}),r.a.createElement("form",{onSubmit:z},r.a.createElement("div",null,r.a.createElement(d,{message:E,type:"error"}),r.a.createElement("label",null,"Nimi"),r.a.createElement("br",null),r.a.createElement("input",{className:"name",type:"text",value:T,name:"Name",placeholder:"Nimi",onChange:function(e){var t=e.target;return D(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:j,type:"error"}),r.a.createElement("label",null,"K\xe4ytt\xe4j\xe4tunnus"),r.a.createElement("br",null),r.a.createElement("input",{className:"username",type:"text",value:U,name:"Username",placeholder:"K\xe4ytt\xe4j\xe4tunnus",onChange:function(e){var t=e.target;return P(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:S,type:"error"}),r.a.createElement("label",null,"S\xe4hk\xf6posti"),r.a.createElement("br",null),r.a.createElement("input",{className:"email",type:"text",value:J,name:"Email",placeholder:"S\xe4hk\xf6posti",onChange:function(e){var t=e.target;return V(t.value)}})),r.a.createElement("div",null,r.a.createElement("label",null,"Vastaanota ilmoituksia:",r.a.createElement("div",{className:"admin-radio",onChange:function(e){var t=e.target;return H(t.value)}},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"notifications",value:!0,defaultChecked:I}),"Kyll\xe4"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"notifications",value:!1,defaultChecked:!I}),"Ei")))),r.a.createElement("button",{type:"submit",className:"edit-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return t(!1)},className:"cancel-button"},"Peruuta")))},Ae=function(e){var t=e.setShowChangePassword,a=e.setMessage,c=Object(n.useState)(null),s=Object(u.a)(c,2),l=s[0],i=s[1],o=Object(n.useState)(""),f=Object(u.a)(o,2),v=f[0],b=f[1],E=Object(n.useState)(""),g=Object(u.a)(E,2),h=g[0],k=g[1],j=Object(n.useState)(""),O=Object(u.a)(j,2),y=O[0],N=O[1],S=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),i(null),!(h.length<3)){e.next=5;break}return i("Salasanassa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),e.abrupt("return");case 5:if(h===y){e.next=8;break}return i("Salasanat eiv\xe4t t\xe4sm\xe4\xe4"),e.abrupt("return");case 8:return e.prev=8,e.next=11,X.editUser({oldPassword:v,newPassword:h});case 11:b(""),k(""),N(""),t(!1),a("Salasana vaihdettu!"),setTimeout((function(){a(null)}),5e3),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(8),e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&"incorrect password"===e.t0.response.data.error?i("Vanha salasana ei t\xe4sm\xe4\xe4"):i("Salasanan vaihtaminen ep\xe4onnistui"),setTimeout((function(){i(null)}),5e3);case 23:case"end":return e.stop()}}),e,null,[[8,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"change-password-form"},r.a.createElement("h2",null,"Vaihda salasana"),r.a.createElement(d,{message:l,type:"error"}),r.a.createElement("form",{onSubmit:S},r.a.createElement("div",null,r.a.createElement("input",{className:"old-password",type:"password",value:v,placeholder:"Vanha salasana",onChange:function(e){var t=e.target;return b(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"new-password",type:"password",value:h,placeholder:"Uusi salasana",onChange:function(e){var t=e.target;return k(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"new-password-again",type:"password",value:y,placeholder:"Uusi salasana uudelleen",onChange:function(e){var t=e.target;return N(t.value)}})),r.a.createElement("button",{type:"submit",className:"change-password-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){return t(!1)},className:"cancel-button"},"Peruuta")))},Ue=function(e){var t=e.user,a=e.setUser,c=Object(n.useState)(null),s=Object(u.a)(c,2),l=s[0],i=s[1],o=Object(n.useState)(!1),m=Object(u.a)(o,2),p=m[0],f=m[1],v=Object(n.useState)(!1),b=Object(u.a)(v,2),E=b[0],g=b[1];return r.a.createElement("div",null,t&&r.a.createElement("div",{className:"user-info"},!p&&!E&&r.a.createElement("div",null,r.a.createElement(d,{message:l,type:"success"}),r.a.createElement("h2",null,"Omat tiedot"),r.a.createElement("p",null,r.a.createElement("b",null,"Nimi: "),t.name),r.a.createElement("p",null,r.a.createElement("b",null,"K\xe4ytt\xe4j\xe4tunnus: "),t.username),r.a.createElement("p",null,r.a.createElement("b",null,"S\xe4hk\xf6postiosoite: "),t.email),r.a.createElement("p",null,r.a.createElement("b",null,"Ilmoitukset: "),t.allowNotifications?r.a.createElement("span",null,"P\xe4\xe4ll\xe4"):r.a.createElement("span",null,"Pois p\xe4\xe4lt\xe4")),r.a.createElement("button",{className:"edit-user-button",onClick:function(){return g(!1),void f(!0)}},"Muokkaa"),r.a.createElement("button",{className:"change-password-button",onClick:function(){return f(!1),void g(!0)}},"Vaihda salasana")),p&&r.a.createElement(Le,{setShowEdit:f,user:t,setUser:a,setMessage:i}),E&&r.a.createElement(Ae,{setShowChangePassword:g,setMessage:i})))},Pe=function(e){var t=e.task,a=e.handleUpdateTask,c=Object(n.useState)(),s=Object(u.a)(c,2),l=s[0],i=(s[1],Object(n.useState)(null)),o=Object(u.a)(i,2),f=o[0],v=o[1],b=Object(n.useState)(null),E=Object(u.a)(b,2),g=E[0],h=E[1],k=Object(n.useState)(null),j=Object(u.a)(k,2),y=j[0],N=j[1],S=Object(n.useState)(t.ratingsAVG),w=Object(u.a)(S,2),x=w[0],C=w[1],T=Object(n.useState)(t.ratingsAmount),D=Object(u.a)(T,2),L=D[0],A=D[1],U=Object(n.useState)(!1),P=Object(u.a)(U,2),K=P[0],J=P[1];Object(n.useEffect)((function(){var e=window.localStorage.getItem("votes");e&&(JSON.parse(e).find((function(e){return e===t.id}))&&(J(!0),N("Kiitos! Olet jo arvioinut t\xe4m\xe4n rastin.")))}),[]);var V=function(){var e=Object(p.a)(m.a.mark((function e(n){var r,c,s,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.addRating(t.id,{rating:n});case 3:r=e.sent,(c=window.localStorage.getItem("votes"))&&(s=JSON.parse(c),l=s.concat(t.id),window.localStorage.setItem("votes",JSON.stringify(l))),C(r.ratingsAVG),A(r.ratingsAmount),a(Object(O.a)({},t,{ratings:t.ratings[n-1]+1,ratingsAVG:r.ratingsAVG,ratingsAmount:r.ratingsAmount})),J(!0),h("Arvostelu l\xe4hetetty"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),v("Jotain meni vikaan"),setTimeout((function(){v(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"task-rating"},r.a.createElement(d,{message:f,type:"error"}),r.a.createElement(d,{message:g,type:"success"}),r.a.createElement("div",{className:"rating"},r.a.createElement("div",null,r.a.createElement("h4",null,"Keskiarvo:"),r.a.createElement(R.a,{rating:Number(x),starRatedColor:"yellow",starDimension:"20px",starSpacing:"10px"})),r.a.createElement("div",{className:"rating-amount"},"(",L,")")),r.a.createElement(d,{message:y,type:"rated"}),!K&&r.a.createElement("div",null,r.a.createElement("h4",null,"Arvostele:"),r.a.createElement(R.a,{rating:l,changeRating:V,starDimension:"30px",starSpacing:"10px"})))},Ke=function(e){var t=e.setModifyVisible,a=e.task,c=e.setTask,s=e.handleUpdateTask,l=e.rules,i=e.seriess,o=e.languages,f=Object(n.useState)(""),v=Object(u.a)(f,2),b=v[0],E=v[1],g=Object(n.useState)(""),h=Object(u.a)(g,2),k=h[0],j=h[1],O=Object(n.useState)(a.name),y=Object(u.a)(O,2),N=y[0],S=y[1],w=Object(n.useState)(a.assignmentText),x=Object(u.a)(w,2),C=x[0],T=x[1],D=Object(n.useState)(a.gradingScale),L=Object(u.a)(D,2),A=L[0],U=L[1],P=Object(n.useState)(a.supervisorInstructions),K=Object(u.a)(P,2),J=K[0],V=K[1],F=Object(n.useState)(a.assignmentTextMD),R=Object(u.a)(F,2),I=R[0],H=R[1],z=Object(n.useState)(a.gradingScaleMD),B=Object(u.a)(z,2),G=B[0],Y=B[1],q=Object(n.useState)(a.supervisorInstructionsMD),Q=Object(u.a)(q,2),W=Q[0],X=Q[1],Z=Object(n.useState)([]),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(a.rules?a.rules.id:null),ne=Object(u.a)(ae,2),re=ne[0],ce=ne[1],se=Object(n.useState)(a.category?a.category.id:null),le=Object(u.a)(se,2),ue=le[0],ie=le[1],oe=Object(n.useState)(a.series.map((function(e){return e.id}))),me=Object(u.a)(oe,2),pe=me[0],de=me[1],fe=Object(n.useState)(a.language?a.language.id:null),ve=Object(u.a)(fe,2),be=ve[0],Ee=ve[1],ge=Object(n.useState)(a.creatorName),he=Object(u.a)(ge,2),ke=he[0],je=he[1],ye=Object(n.useState)(a.creatorEmail),Ne=Object(u.a)(ye,2),Se=Ne[0],we=Ne[1],Ce=Object(n.useState)(null),Te=Object(u.a)(Ce,2),De=Te[0],Le=Te[1],Ae=Object(n.useState)(null),Ue=Object(u.a)(Ae,2),Pe=Ue[0],Ke=Ue[1],Me=Object(n.useState)(null),Je=Object(u.a)(Me,2),Ve=Je[0],Fe=Je[1],Re=Object(n.useState)(null),Ie=Object(u.a)(Re,2),He=Ie[0],ze=Ie[1],Be=Object(n.useState)(null),Ge=Object(u.a)(Be,2),_e=Ge[0],Ye=Ge[1],qe=Object(n.useState)(a.files||[]),Qe=Object(u.a)(qe,2),We=Qe[0],Xe=Qe[1],Ze=Object(n.useState)([]),$e=Object(u.a)(Ze,2),et=$e[0],tt=$e[1],at=Object(n.useState)([]),nt=Object(u.a)(at,2),rt=nt[0],ct=nt[1],st=a.id;Object(n.useEffect)((function(){if(l&&a.rules&&a.rules.id){var e=l.find((function(e){return e.id===a.rules.id}));e&&te(e.acceptedCategories)}}),[]);var lt=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Le(null),Ke(null),Fe(null),ze(null),Ye(null),N.length<1&&Le("Nimi ei saa olla tyhj\xe4"),C.length<1&&Ke("Teht\xe4v\xe4nanto ei saa olla tyhj\xe4"),ke.length<1&&Fe("Lis\xe4\xe4j\xe4n nimi ei saa olla tyhj\xe4"),Se.length<1&&ze("Lis\xe4\xe4j\xe4n s\xe4hk\xf6posti ei saa olla tyhj\xe4"),""!==be&&""!==re&&""!==pe&&""!==ue||Ye("Valitsethan arvon kaikkiin pudotuskenttiin"),!(N.length<1||C.length<1||ke.length<1||Se.length<1||""===be||""===re||""===pe||""===ue)){e.next=13;break}return e.abrupt("return");case 13:if((a=new FormData).append("filesToDelete",rt),et.length>0)for(n=0;n<et.length;n++)a.append("filesToAdd",et[n],et[n].name);return r=[],e.prev=17,e.next=20,Oe.updateFiles(a);case 20:return r=e.sent,e.next=23,M.updateTask({name:N,rule:re,category:ue,series:pe,language:be,assignmentText:C,gradingScale:A,creatorName:ke,creatorEmail:Se,supervisorInstructions:J,id:st,assignmentTextMD:I,gradingScaleMD:G,supervisorInstructionsMD:W,files:We.concat(r)});case 23:l=e.sent,console.log(l),E("Teht\xe4v\xe4 tallennettu!"),c(l),s(l),setTimeout((function(){E(null),window.location.reload()}),1e3),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(17),j("Jotain meni vikaan"),setTimeout((function(){j(null)}),5e3);case 35:case"end":return e.stop()}}),e,null,[[17,31]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"modify-task-container"},r.a.createElement("h2",null,"Muokkaa teht\xe4v\xe4\xe4"),r.a.createElement(d,{message:b,type:"success"}),r.a.createElement(d,{message:k,type:"error"}),r.a.createElement("form",{onSubmit:lt,className:"modify-form"},r.a.createElement("div",null,r.a.createElement(d,{message:De,type:"error"}),r.a.createElement("input",{className:"task-title",type:"text",defaultValue:N,name:"Name",placeholder:"Teht\xe4v\xe4n nimi",onChange:function(e){var t=e.target;return S(t.value)}})),r.a.createElement("div",null,r.a.createElement("h4",null,"Teht\xe4v\xe4nanto"),r.a.createElement(d,{message:Pe,type:"error"}),r.a.createElement(xe,{setText:T,setMD:H,value:I,placeHolder:"Teht\xe4v\xe4nanto"})),r.a.createElement("div",null,r.a.createElement("h4",null,"Arvostelu"),r.a.createElement(xe,{setText:U,setMD:Y,value:G,placeHolder:"Arvostelu"})),r.a.createElement("div",{className:"instructions"},r.a.createElement("h4",null,"Rastimiehen ohje"),r.a.createElement(xe,{setText:V,setMD:X,value:W,placeHolder:"Rastimiehen ohje"})),r.a.createElement(d,{message:_e,type:"error"}),r.a.createElement("div",{className:"dropdowns"},r.a.createElement("div",null,r.a.createElement("select",{multiple:!0,value:pe,onChange:function(e){return function(e){for(var t=e.target.options,a=[],n=0,r=t.length;n<r;n++)t[n].selected&&""!==t[n].value&&a.push(t[n].value);de(a)}(e)},className:"multiple-series"},r.a.createElement("option",{value:"",className:"series-info"},"Sarja (paina Ctrl, jos useita)"),i.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",null,r.a.createElement("select",{value:re,onChange:function(e){return function(e){if(ce(e.target.value),ie(""),e.target.value){var t=l.find((function(t){return t.id===e.target.value}));te(t.acceptedCategories)}else te([])}(e)}},r.a.createElement("option",{value:""},"S\xe4\xe4nn\xf6t"),l.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("select",{value:ue,onChange:function(e){return function(e){ie(e.target.value)}(e)}},r.a.createElement("option",{value:""},"Kategoria"),ee.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("br",null),r.a.createElement("select",{value:be,onChange:function(e){return function(e){Ee(e.target.value)}(e)}},r.a.createElement("option",{value:""},"Kieli"),o.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),r.a.createElement("div",{className:"creator"},r.a.createElement("div",null,r.a.createElement(d,{message:Ve,type:"error"}),r.a.createElement("input",{className:"",type:"text",defaultValue:ke,name:"CreatorName",placeholder:"Muokkaajan nimi",onChange:function(e){var t=e.target;return je(t.value)}})),r.a.createElement("div",null,r.a.createElement(d,{message:He,type:"error"}),r.a.createElement("input",{className:"",type:"text",defaultValue:Se,name:"CreatorEmail",placeholder:"Muokkaajan s\xe4hk\xf6posti",onChange:function(e){var t=e.target;return we(t.value)}}))),r.a.createElement(_.a,{onDrop:function(e){tt(et.concat(e))}},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement("div",{className:"files"},r.a.createElement("div",{className:"title"},"Liitetiedostot"),We&&We.length>0&&r.a.createElement(r.a.Fragment,null,We.map((function(e){return r.a.createElement("div",{key:e},e.substring(e.indexOf("-")+1,e.length),r.a.createElement("span",{onClick:function(t){return function(e,t){e.stopPropagation(),Xe(We.filter((function(e){return e!==t}))),ct(rt.concat(t))}(t,e)},className:"remove-file"}))}))),et&&et.length>0&&r.a.createElement(r.a.Fragment,null,et.map((function(e){return r.a.createElement("div",{key:e.name},e.name,r.a.createElement("span",{onClick:function(t){return function(e,t){e.stopPropagation(),tt(et.filter((function(e){return e.name!==t})))}(t,e.name)},className:"remove-file"}))})))))})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"save-task-button"},"Tallenna"),r.a.createElement("button",{onClick:function(){t(!1)},className:"return-button"},"Peruuta"))))},Me=function(e){var t=e.text;return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:"".concat(t)}})},Je=function(e){var t=e.match,a=e.user,c=e.rules,s=e.seriess,l=e.languages,o=e.addTaskToBasket,f=e.handleAddTask,v=e.handleUpdateTask,b=e.handleDeleteTask,E=Object(n.useState)(null),g=Object(u.a)(E,2),h=g[0],k=g[1],j=Object(n.useState)(!1),O=Object(u.a)(j,2),y=O[0],N=O[1],S=Object(n.useState)(null),w=Object(u.a)(S,2),x=w[0],C=w[1],T=Object(n.useState)(null),D=Object(u.a)(T,2),L=D[0],A=D[1],U=Object(n.useState)(""),P=Object(u.a)(U,2),K=P[0],J=P[1],V=Object(n.useState)(""),F=Object(u.a)(V,2),R=F[0],I=F[1],H=Object(n.useState)(""),z=Object(u.a)(H,2),G=z[0],_=z[1],q=Object(n.useState)(""),Q=Object(u.a)(q,2),W=Q[0],X=Q[1],Z=Object(n.useState)(null),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(u.a)(ae,2),re=ne[0],ce=ne[1],se=Object(n.useState)(!1),le=Object(u.a)(se,2),ue=le[0],ie=le[1],oe=Object(i.f)();Object(n.useEffect)((function(){M.getOneTask(t.params.id).then((function(e){k(e)}))}),[]);var me=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),t=new FormData,a=JSON.stringify({name:K,date:R,place:G,type:W,task:h.id}),t.append("competition",a),ee&&t.append("logo",ee,ee.name),e.prev=5,e.next=8,M.makePDF(t,h.id);case 8:n=e.sent,J(""),I(""),_(""),X(""),te(null),r=window.URL.createObjectURL(new Blob([n],{type:"application/pdf"})),(c=document.createElement("a")).href=r,c.setAttribute("download","".concat(h.name,".pdf")),document.body.appendChild(c),c.click(),ie(!1),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(5),A("Jotain meni vikaan"),setTimeout((function(){A(null)}),5e3);case 27:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,y?r.a.createElement(Ke,{setModifyVisible:N,task:h,rules:c,seriess:s,languages:l,setTask:k,handleUpdateTask:v}):r.a.createElement("div",{className:"task-view-info-background"},r.a.createElement(d,{message:x,type:"success"}),r.a.createElement(d,{message:L,type:"error"}),h&&r.a.createElement("div",{className:"task-view-info"},r.a.createElement("div",null,r.a.createElement("h2",null,h.name),r.a.createElement("span",null,r.a.createElement("div",{className:"black-basket-task-view",title:"Lis\xe4\xe4 koriin",onClick:function(e){return o(e,h)}})),r.a.createElement(Pe,{task:h,handleUpdateTask:v})),r.a.createElement("h3",null,"Teht\xe4v\xe4nanto"),r.a.createElement(Me,{text:h.assignmentText}),r.a.createElement("h3",null,"Rastimiehen ohjeet"),r.a.createElement(Me,{text:h.supervisorInstructions}),r.a.createElement("h3",null,"Arvosteluasteikko"),r.a.createElement(Me,{text:h.gradingScale}),r.a.createElement("h3",null,"Sarja"),h.series.map((function(e){return r.a.createElement("span",{key:h.id+e.id},e.name,r.a.createElement("br",null))})),r.a.createElement("h3",null,"Kategoria"),r.a.createElement("p",null,h.category&&h.category.name),r.a.createElement("h3",null,"S\xe4\xe4nt\xf6luokka"),r.a.createElement("p",null,h.rules&&h.rules.name),r.a.createElement("h3",null,"Teht\xe4v\xe4n viimeisin muokkaaja"),r.a.createElement("p",null,h.creatorName,r.a.createElement("br",null),h.creatorEmail),r.a.createElement("h3",null,"Teht\xe4v\xe4 lis\xe4tty"),h.created&&r.a.createElement("p",null,r.a.createElement(B.a,{format:"DD.MM.YYYY HH:mm"},h.created)),r.a.createElement("h3",null,"Liitetiedostot"),h.files&&0===h.files.length&&r.a.createElement("p",null,"-"),h.files&&h.files.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("a",{href:"https://kisapankki.blob.core.windows.net/files/".concat(e)},e.substring(e.indexOf("-")+1,e.length)))})),re?r.a.createElement("div",{className:"competition-task"},r.a.createElement("div",{className:"make-pdf right",onClick:function(){return ce(!1)}},"Sulje"),r.a.createElement(Y,{name:K,date:R,place:G,type:W,logo:ee,setName:J,setDate:I,setPlace:_,setType:X,setLogo:te}),ue?r.a.createElement("div",{className:"loader in-task"}):r.a.createElement("button",{onClick:function(){return me()}},"Tee PDF-tiedosto")):r.a.createElement("div",{className:"make-pdf",onClick:function(){return ce(!0)}},"Lis\xe4\xe4 kisan tiedot/Tee PDF"),a&&r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:function(){return N(!0)},className:"modify-view-button"},"Muokkaa"),h.pending&&r.a.createElement("button",{className:"accept-button",onClick:function(){return function(){try{M.acceptTask(h.id),C("Teht\xe4v\xe4 hyv\xe4ksytty"),f(h),setTimeout((function(){C(null),oe.push("/admin")}),2e3)}catch(e){A("Jotain meni vikaan"),setTimeout((function(){A(null)}),5e3)}}()}},"Hyv\xe4ksy"),r.a.createElement("button",{className:"delete-button",onClick:function(){return function(){try{window.confirm("Haluatko poistaa teht\xe4v\xe4n: ".concat(h.name))&&(M.deleteTask(h.id),b(h.id),C("Teht\xe4v\xe4 poistettu"),setTimeout((function(){C(null),h.pending?oe.push("/admin"):oe.push("/")}),2e3))}catch(e){A("Jotain meni vikaan"),setTimeout((function(){A(null)}),5e3)}}()}},"Poista")))))},Ve=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),o=Object(u.a)(s,2),m=o[0],p=o[1],d=Object(n.useState)(null),f=Object(u.a)(d,2),v=f[0],b=f[1],E=Object(n.useState)([]),g=Object(u.a)(E,2),h=g[0],O=g[1],y=Object(n.useState)([]),N=Object(u.a)(y,2),S=N[0],w=N[1],x=Object(n.useState)([]),C=Object(u.a)(x,2),T=C[0],D=C[1],L=Object(n.useState)([]),A=Object(u.a)(L,2),U=A[0],P=A[1],K=Object(i.f)();Object(n.useEffect)((function(){M.getTasks().then((function(e){p(e)}));var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);b(t),k(t.token)}if(!window.localStorage.getItem("votes")){window.localStorage.setItem("votes",JSON.stringify([]))}var a=window.localStorage.getItem("basket");if(a){var n=JSON.parse(a);c(n)}ge.getCategories().then((function(e){O(e)})),fe.getSeries().then((function(e){D(e)})),te.getRules().then((function(e){w(e)})),le.getLanguages().then((function(e){P(e)}))}),[]),Object(n.useEffect)((function(){window.localStorage.setItem("basket",JSON.stringify(a))}),[a]);var V=function(e){p(m.concat(e))},F=function(e){p(m.map((function(t){return t.id!==e.id?t:e}))),c(a.map((function(t){return t.id!==e.id?t:e})))},R=function(e){p(m.filter((function(t){return t.id!==e}))),c(a.filter((function(t){return t.id!==e})))},I=function(e,t){e.preventDefault(),e.stopPropagation(),a.find((function(e){return e.id===t.id}))||c(a.concat(t))},H=function(e){c(a.filter((function(t){return t.id!==e})))},z=function(){c([])};return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement(l.b,{to:"/"},r.a.createElement("div",{className:"logo"})),r.a.createElement(l.b,{to:"/tehtavat"},r.a.createElement("button",{className:"addtask-button-header"},"Teht\xe4v\xe4t")),r.a.createElement(l.b,{to:"/lisaa_tehtava"},r.a.createElement("button",{className:"addtask-button-header"},"Lis\xe4\xe4 teht\xe4v\xe4")),null===v?r.a.createElement(n.Fragment,null,r.a.createElement(l.b,{to:"/kirjautuminen"},r.a.createElement("button",{className:"login-button-header"},"Kirjaudu"))):r.a.createElement(n.Fragment,null,r.a.createElement(l.b,{to:"/admin"},r.a.createElement("button",{className:"admin-button-header"},"Admin")),r.a.createElement("div",null,r.a.createElement("div",{className:"logged"},"Kirjautuneena ",r.a.createElement(l.b,{to:"/omasivu",className:"username-header"},v.username)),r.a.createElement("div",{className:"logout"},r.a.createElement("button",{className:"logout-button-header",onClick:function(){return window.localStorage.removeItem("loggedUser"),b(null),k(null),K.push("/"),void window.location.reload()}},"Kirjaudu ulos")))),r.a.createElement(l.b,{to:"/valitut_tehtavat"},r.a.createElement("div",{className:"white-basket"},a.length>0&&r.a.createElement("span",{className:"number-of-tasks-in-basket"},a.length)))),r.a.createElement("div",{className:"admin-task-buttons-mobile"},r.a.createElement(l.b,{to:"/tehtavat"},r.a.createElement("button",{className:"addtask-button-mobile"},"Teht\xe4v\xe4t")),r.a.createElement(l.b,{to:"/lisaa_tehtava"},r.a.createElement("button",{className:"addtask-button-mobile"},"Lis\xe4\xe4 teht\xe4v\xe4")),null!==v&&r.a.createElement(l.b,{to:"/admin"},r.a.createElement("button",{className:"admin-button-mobile"},"Admin"))),r.a.createElement("div",{className:"container"},r.a.createElement(i.b,{exact:!0,path:"/",render:function(){return r.a.createElement(J,{tasks:m,addTaskToBasket:I,handleUpdateTask:F})}}),r.a.createElement(i.b,{exact:!0,path:"/tehtava/:id",render:function(e){return r.a.createElement(Je,Object.assign({},e,{user:v,rules:S,seriess:T,languages:U,addTaskToBasket:I,handleAddTask:V,handleUpdateTask:F,handleDeleteTask:R}))}}),r.a.createElement(i.b,{path:"/tehtavat",render:function(){return r.a.createElement(G,{user:v,originalTasks:m,categories:h,rules:S,seriess:T,addTaskToBasket:I,handleUpdateTask:F,handleDeleteTask:R})}}),r.a.createElement(i.b,{path:"/valitut_tehtavat",render:function(){return r.a.createElement(q,{tasks:a,removeTaskFromBasket:H,removeAllFromBasket:z,handleUpdateTask:F})}}),r.a.createElement(i.b,{path:"/kirjautuminen",render:function(){return r.a.createElement(j,{setUser:b})}}),r.a.createElement(i.b,{path:"/lisaa_tehtava",render:function(){return r.a.createElement(Ce,{rules:S,seriess:T,languages:U})}}),r.a.createElement(i.b,{path:"/omasivu",render:function(){return localStorage.getItem("loggedUser")?r.a.createElement(Ue,{user:v,setUser:b}):r.a.createElement(i.a,{to:"/"})}}),r.a.createElement(i.b,{path:"/admin",render:function(){return localStorage.getItem("loggedUser")?r.a.createElement(De,{handleAddTask:V,handleUpdateTask:F,handleDeleteTask:R}):r.a.createElement(i.a,{to:"/"})}}),r.a.createElement(i.b,{path:"/lisaa_admin",render:function(){return localStorage.getItem("loggedUser")?r.a.createElement(Z,null):r.a.createElement(i.a,{to:"/"})}}),r.a.createElement(i.b,{path:"/lisaa_pudotusvalikkoon",render:function(){return localStorage.getItem("loggedUser")?r.a.createElement(ke,{rules:S,categories:h,languages:U,series:T,setRules:w,setCategories:O,setLanguages:P,setSeriess:D}):r.a.createElement(i.a,{to:"/"})}})))};a(389);s.a.render(r.a.createElement(l.a,null,r.a.createElement(Ve,null)),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.02b80658.chunk.js.map