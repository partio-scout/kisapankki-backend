(this.webpackJsonpkisapankki=this.webpackJsonpkisapankki||[]).push([[0],{15:function(e,t,a){e.exports=a(40)},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(14),l=a.n(s),u=a(1),c=a(3),i=a.n(c),o=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)},m=a(4),p=a.n(m),v="".concat("/api","/login"),g=function(e){var t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(p.a.post(v,e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},d=function(e){var t=e.setUser,a=e.setPage,s=Object(n.useState)(null),l=Object(u.a)(s,2),c=l[0],m=l[1],p=Object(n.useState)(""),v=Object(u.a)(p,2),d=v[0],b=v[1],f=Object(n.useState)(""),E=Object(u.a)(f,2),j=E[0],h=E[1];return r.a.createElement("div",{className:"login-form"},r.a.createElement("h2",null,"Kirjaudu sis\xe4\xe4n"),r.a.createElement(o,{message:c}),r.a.createElement("form",{onSubmit:function(e){var n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,r.next=4,i.a.awrap(g({username:d,password:j}));case 4:n=r.sent,window.localStorage.setItem("loggedUser",JSON.stringify(n)),t(n),b(""),h(""),a("tasks"),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(1),m("V\xe4\xe4r\xe4 k\xe4ytt\xe4j\xe4tunnus/salasana"),setTimeout((function(){m(null)}),5e3);case 16:case"end":return r.stop()}}),null,null,[[1,12]])}},r.a.createElement("div",null,r.a.createElement("input",{className:"username",type:"text",value:d,name:"Username",placeholder:"K\xe4ytt\xe4j\xe4tunnus",onChange:function(e){var t=e.target;return b(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"password",type:"password",value:j,name:"Password",placeholder:"Salasana",onChange:function(e){var t=e.target;return h(t.value)}})),r.a.createElement("button",{type:"submit",className:"login-button"},"Kirjaudu")))},b="".concat("/api","/signup"),f=function(e){var t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(p.a.post(b,e));case 2:return t=a.sent,console.log(b),a.abrupt("return",t.data);case 5:case"end":return a.stop()}}))},E=function(e){var t=e.setUser,a=e.setPage,s=Object(n.useState)(null),l=Object(u.a)(s,2),c=l[0],m=l[1],p=Object(n.useState)(null),v=Object(u.a)(p,2),g=v[0],d=v[1],b=Object(n.useState)(null),E=Object(u.a)(b,2),j=E[0],h=E[1],k=Object(n.useState)(null),O=Object(u.a)(k,2),w=O[0],y=O[1],N=Object(n.useState)(""),S=Object(u.a)(N,2),x=S[0],C=S[1],K=Object(n.useState)(""),U=Object(u.a)(K,2),P=U[0],I=U[1],J=Object(n.useState)(""),R=Object(u.a)(J,2),D=R[0],T=R[1],A=Object(n.useState)(""),B=Object(u.a)(A,2),F=B[0],V=B[1];return r.a.createElement("div",{className:"signup-form"},r.a.createElement("h2",null,"Rekister\xf6idy"),r.a.createElement(o,{message:c}),r.a.createElement("form",{onSubmit:function(e){var n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),d(null),h(null),y(null),x.length<3&&d("Nimess\xe4 pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),P.length<3&&h("K\xe4ytt\xe4j\xe4tunnuksessa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),D.length<3&&y("Salasanassa pit\xe4\xe4 olla v\xe4hint\xe4\xe4n 3 kirjainta"),!(x.length<3||P.length<3||D.length<3)){r.next=9;break}return r.abrupt("return");case 9:return r.prev=9,r.next=12,i.a.awrap(f({name:x,username:P,password:D,key:F}));case 12:n=r.sent,window.localStorage.setItem("loggedUser",JSON.stringify(n)),t(n),C(""),I(""),T(""),V(""),a("tasks"),r.next=26;break;case 22:r.prev=22,r.t0=r.catch(9),m("Rekister\xf6ityminen ep\xe4onnistui"),setTimeout((function(){m(null)}),5e3);case 26:case"end":return r.stop()}}),null,null,[[9,22]])}},r.a.createElement("div",null,r.a.createElement(o,{message:g}),r.a.createElement("input",{className:"name",type:"text",value:x,name:"Name",placeholder:"Nimi",onChange:function(e){var t=e.target;return C(t.value)}})),r.a.createElement("div",null,r.a.createElement(o,{message:j}),r.a.createElement("input",{className:"username",type:"text",value:P,name:"Username",placeholder:"K\xe4ytt\xe4j\xe4tunnus",onChange:function(e){var t=e.target;return I(t.value)}})),r.a.createElement("div",null,r.a.createElement(o,{message:w}),r.a.createElement("input",{className:"password",type:"password",value:D,name:"Password",placeholder:"Salasana",onChange:function(e){var t=e.target;return T(t.value)}})),r.a.createElement("div",null,r.a.createElement("input",{className:"key",type:"text",value:F,name:"Key",placeholder:"Avain",onChange:function(e){var t=e.target;return V(t.value)}})),r.a.createElement("button",{type:"submit",className:"signup-button"},"Rekister\xf6idy")))},j=function(){var e=Object(n.useState)("tasks"),t=Object(u.a)(e,2),a=t[0],s=t[1],l=Object(n.useState)(null),c=Object(u.a)(l,2),i=c[0],o=c[1];Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);o(t)}}),[]);var m=function(e){return function(t){t.preventDefault(),s(e)}};return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo",onClick:m("tasks")}),null===i?r.a.createElement(n.Fragment,null,r.a.createElement("button",{className:"login-button-header",onClick:m("login")},"Kirjaudu"),r.a.createElement("button",{className:"signup-button-header",onClick:m("signup")},"Rekister\xf6idy")):r.a.createElement("div",null,r.a.createElement("div",{className:"logged"},"Kirjautuneena ",i.username),r.a.createElement("div",{className:"logout"},r.a.createElement("button",{className:"logout-button-header",onClick:function(){return window.localStorage.removeItem("loggedUser"),o(null),void m("tasks")}},"Kirjaudu ulos")))),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Kisateht\xe4v\xe4pankki"),"tasks"===a?r.a.createElement("div",null):"login"===a?r.a.createElement(d,{setUser:o,setPage:s}):"signup"===a?r.a.createElement(E,{setUser:o,setPage:s}):void 0))};a(39);l.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.24ad6e1d.chunk.js.map